"use strict";(self.webpackChunkRepainters=self.webpackChunkRepainters||[]).push([[683],{4028:(M,u,a)=>{a.d(u,{J:()=>s});var i=a(9417);class m{constructor(){this.createdOn=new Date,this.lastModifiedDate=new Date}}var e=a(7705),l=a(4412),v=a(6813),g=a(1626);let p=(()=>{class r{constructor(t){this.httpClient=t,this.baseUrl=v.c.backend.baseURL,this.internalPaintingMethod=this.baseUrl+"v1/internalpainting"}addInternalPainting(t){return this.httpClient.post(this.internalPaintingMethod+"/create",t)}listInternalPainting(t=""){return this.httpClient.get(this.internalPaintingMethod+t)}updateInternalPainting(t){return this.httpClient.post(`${this.internalPaintingMethod}/update/${t.internalPaintingId}`,t)}deleteInternalPainting(t){return this.httpClient.delete(`${this.internalPaintingMethod}/delete/${t}`)}getInternalPaintingByCustomerId(t){return this.httpClient.get(`${this.internalPaintingMethod}/customer/${t}`)}static{this.\u0275fac=function(n){return new(n||r)(e.KVO(g.Qq))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var h=a(5794);let P=(()=>{class r{get internalPainting(){return this._internalPainting.asObservable()}get internalPaintings(){return this._internalPaintings.asObservable()}constructor(t,n){this.InternalPaintingService=t,this.toaster=n,this._internalPainting=new l.t([]),this.internalPaintingList={internalPainting:[]},this._internalPaintings=new l.t(new m),this.currentInternalPainting={_internalPaintings:new m}}addInternalPainting(t){this.InternalPaintingService.addInternalPainting(t).subscribe(n=>{t.internalPaintingId=n.created_id,t.createdOn=t.createdOn||new Date,t.lastModifiedDate=new Date,this.internalPaintingList.internalPainting.push(t),this._internalPainting.next(Object.assign({},this.internalPaintingList).internalPainting),this.toaster.success("Internal Painting Confirmed Successfully","Confirmation")})}listInternalPainting(){this.InternalPaintingService.listInternalPainting().subscribe(t=>{this.internalPaintingList.internalPainting=t,this._internalPainting.next(Object.assign({},this.internalPaintingList).internalPainting)})}updateInternalPainting(t){this.InternalPaintingService.updateInternalPainting(t).subscribe(n=>{t.lastModifiedDate=new Date,this.internalPaintingList.internalPainting.findIndex(c=>c.internalPaintingId==t.internalPaintingId),this._internalPainting.next(Object.assign({},this.internalPaintingList).internalPainting),this.toaster.success("Internal Painting Updated Successfully","Confirmation")})}getInternalPaintingByCustomerId(t,n){return this.InternalPaintingService.getInternalPaintingByCustomerId(t)}static{this.\u0275fac=function(n){return new(n||r)(e.KVO(p),e.KVO(h.tw))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var f=a(7062),I=a(177);function C(r,d){if(1&r&&(e.j41(0,"option",37),e.EFF(1),e.k0s()),2&r){const t=d.$implicit;e.Y8G("value",t),e.R7$(1),e.JRh(t)}}function b(r,d){if(1&r&&(e.j41(0,"option",37),e.EFF(1),e.k0s()),2&r){const t=d.$implicit;e.Y8G("value",t),e.R7$(1),e.JRh(t)}}let s=(()=>{class r{constructor(t,n,o){this.fb=t,this.internalPaintingProvider=n,this.route=o,this.customerId=null,this.currentInternalPainting=new m,this.wallTypes=["PRIMER + 2 COATS BUDGET EMULSION","PRIMER + 2 COATS PREMIUM EMULSION","PRIMER + 2 COATS LUXURY EMULSION","PRIMER + 2 COATS HEALTH SHIELD PAINT","PRIMER + PUTTY + 2 COATS BUDGET EMULSION","PRIMER + PUTTY + 2 COATS PREMIUM EMULSION","PRIMER + PUTTY + 2 COATS LUXURY EMULSION"],this.ceilingTypes=["2 COATS BUDGET EMULSION","PRIMER + 2 COATS BUDGET EMULSION","PRIMER + 2 COATS PREMIUM EMULSION","PRIMER + PUTTY + 2 COATS BUDGET EMULSION","PRIMER + PUTTY + 2 COATS PREMIUM EMULSION"],this.rates={"2 COATS BUDGET EMULSION":8.5,"PRIMER + 2 COATS BUDGET EMULSION":11,"PRIMER + 2 COATS PREMIUM EMULSION":18,"PRIMER + PUTTY + 2 COATS BUDGET EMULSION":19,"PRIMER + PUTTY + 2 COATS PREMIUM EMULSION":26},this.pricerates={"PRIMER + 2 COATS BUDGET EMULSION":11,"PRIMER + 2 COATS PREMIUM EMULSION":18,"PRIMER + 2 COATS LUXURY EMULSION":23,"PRIMER + 2 COATS HEALTH SHIELD PAINT":25,"PRIMER + PUTTY + 2 COATS BUDGET EMULSION":19,"PRIMER + PUTTY + 2 COATS PREMIUM EMULSION":26,"PRIMER + PUTTY + 2 COATS LUXURY EMULSION":32},this.initializeForm()}ngOnInit(){this.setupListeners(),this.extractCustomerId(),this.customerId&&this.fetchExistingInternalPaintingData()}fetchExistingInternalPaintingData(){null!==this.customerId&&this.internalPaintingProvider.getInternalPaintingByCustomerId(this.customerId,{deleted:0}).subscribe(t=>{if(t&&t.length>0){const n=t[0];this.requirementForm.patchValue({carpetArea:n.carpetArea,ceilingType:n.ceilingType,ceilingPrice:n.ceilingPrice,ceilingRemarks:n.ceilingRemarsk,wallType:n.wallType,wallPrice:n.wallPrice,wallRemarks:n.wallRemarks,noofWall:n.noofWall,darkPrice:n.darkPrice,darkRemarks:n.darkRemarks,sectionTotalPre_tax:n.sectionTotalPre_tax,sectionTotalPost_tax:n.sectionTotalPost_tax,totalRemarks:n.totalRemarks})}},t=>{console.error("Error fetching internal painting data:",t)})}extractCustomerId(){this.route.parent?.paramMap.subscribe(t=>{const n=t.get("customerId");this.customerId=n?parseInt(n,10):null,console.log("Parent Route Customer ID:",this.customerId)}),this.route.paramMap.subscribe(t=>{const n=t.get("customerId");n&&(this.customerId=parseInt(n,10),console.log("Current Route Customer ID:",this.customerId))}),this.currentInternalPainting&&this.currentInternalPainting.customerId&&(this.customerId=this.currentInternalPainting.customerId,console.log("Current Internal Painting Customer ID:",this.customerId))}initializeForm(){this.requirementForm=this.fb.group({carpetArea:["",i.k0.required],ceilingType:["",i.k0.required],ceilingPrice:["",i.k0.required],ceilingRemarsk:["",i.k0.required],wallType:["",i.k0.required],wallPrice:["",i.k0.required],wallRemarks:["",i.k0.required],noofWall:["",i.k0.required],darkPrice:["",i.k0.required],darkRemarks:["",i.k0.required],sectionTotalPre_tax:["",i.k0.required],sectionTotalPost_tax:["",i.k0.required],totalRemarks:["",i.k0.required]})}OnAddInternalPainting(){if(console.log("Current Customer ID:",this.customerId),!this.customerId){const n=window.location.pathname.split("/"),o=n[n.indexOf("view")+1];this.customerId=o?parseInt(o,10):null,console.log("URL Extracted Customer ID:",this.customerId)}if(!this.customerId)return void console.error("Customer ID is required");const t={customerId:this.customerId,carpetArea:this.requirementForm.get("carpetArea")?.value,ceilingType:this.requirementForm.get("ceilingType")?.value,ceilingPrice:this.requirementForm.get("ceilingPrice")?.value,ceilingRemarsk:this.requirementForm.get("ceilingRemarsk")?.value,wallType:this.requirementForm.get("wallType")?.value,wallPrice:this.requirementForm.get("wallPrice")?.value,wallRemarks:this.requirementForm.get("wallRemarks")?.value,noofWall:this.requirementForm.get("noofWall")?.value.toString(),darkPrice:this.requirementForm.get("darkPrice")?.value,darkRemarks:this.requirementForm.get("darkRemarks")?.value,sectionTotalPost_tax:this.requirementForm.get("sectionTotalPost_tax")?.value,sectionTotalPre_tax:this.requirementForm.get("sectionTotalPre_tax")?.value,totalRemarks:this.requirementForm.get("totalRemarks")?.value};this.currentInternalPainting.internalPaintingId?this.internalPaintingProvider.updateInternalPainting(t):this.internalPaintingProvider.addInternalPainting(t)}setupListeners(){this.requirementForm.get("carpetArea")?.valueChanges.subscribe(()=>{this.calculatePrices()}),this.requirementForm.get("wallType")?.valueChanges.subscribe(()=>{this.calculateWallPrice()}),this.requirementForm.get("ceilingType")?.valueChanges.subscribe(()=>{this.calculateCeilingPrice()}),this.requirementForm.get("noofWall")?.valueChanges.subscribe(()=>{this.calculateDarkWallPrice()})}calculatePrices(){this.calculateWallPrice(),this.calculateCeilingPrice()}calculateWallPrice(){const t=Number(this.requirementForm.get("carpetArea")?.value)||0,n=this.requirementForm.get("wallType")?.value;this.requirementForm.patchValue({wallPrice:(2*t*(this.pricerates[n]||0)).toFixed(2)},{emitEvent:!1}),this.calculateSectionTotal()}calculateCeilingPrice(){const t=Number(this.requirementForm.get("carpetArea")?.value)||0,n=this.requirementForm.get("ceilingType")?.value;this.requirementForm.patchValue({ceilingPrice:(t*(this.rates[n]||0)).toFixed(2)},{emitEvent:!1}),this.calculateSectionTotal()}calculateDarkWallPrice(){const o=2e3*(Number(this.requirementForm.get("noofWall")?.value)||0);this.requirementForm.patchValue({darkPrice:o.toFixed(2)},{emitEvent:!1}),this.calculateSectionTotal()}calculateSectionTotal(){const c=(Number(this.requirementForm.get("wallPrice")?.value)||0)+(Number(this.requirementForm.get("ceilingPrice")?.value)||0)+(Number(this.requirementForm.get("darkPrice")?.value)||0);this.requirementForm.patchValue({sectionTotalPre_tax:c.toFixed(2),sectionTotalPost_tax:(1.18*c).toFixed(2)},{emitEvent:!1})}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(i.ok),e.rXU(P),e.rXU(f.nX))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-requirement"]],inputs:{currentInternalPainting:"currentInternalPainting"},decls:102,vars:3,consts:[[1,"page-container"],[1,"form-card"],[1,"main-form"],[1,"painting-container"],[1,"section-card"],[1,"card-banner"],[3,"formGroup"],[1,"carpet-area-section"],[1,"section-highlight"],[1,"highlight-label"],[1,"premium-input"],["type","number","formControlName","carpetArea","placeholder","Enter carpet area"],[1,"input-line"],[1,"paint-block"],[1,"block-header"],[1,"block-number"],[1,"input-grid"],[1,"premium-group"],[1,"custom-select"],["formControlName","ceilingType"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","ceilingPrice","placeholder","Price","readonly",""],[1,"premium-input","mt-3"],["formControlName","ceilingRemarsk","placeholder","Enter remarks for ceiling",1,"remarks-input"],["formControlName","wallType"],["type","number","formControlName","wallPrice","placeholder","Price","readonly",""],["formControlName","wallRemarks","placeholder","Enter remarks for wall",1,"remarks-input"],["type","number","formControlName","noofWall","placeholder","Number of walls"],["type","number","formControlName","darkPrice","placeholder","Price"],["formControlName","darkRemarks","placeholder","Enter remarks for wall",1,"remarks-input"],[1,"total-section"],["type","number","formControlName","sectionTotalPre_tax","placeholder","Pre-tax Total"],["type","number","formControlName","sectionTotalPost_tax","placeholder","Post-tax Total","readonly",""],["formControlName","totalRemarks","placeholder","Enter remarks",1,"remarks-input"],[1,"confirm-btn"],["type","submit","id","packageConfirm",1,"internalBtn",3,"click"],[3,"value"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),e.EFF(7,"B. Internal Painting"),e.k0s()(),e.nrm(8,"br")(9,"br"),e.j41(10,"form",6)(11,"div",7)(12,"div",8)(13,"label",9),e.EFF(14,"Carpet Area (In Sft)"),e.k0s(),e.j41(15,"div",10),e.nrm(16,"input",11)(17,"div",12),e.k0s()()(),e.j41(18,"div",13)(19,"div",14)(20,"span",15),e.EFF(21,"Ceiling"),e.k0s()(),e.j41(22,"div",16)(23,"div",17)(24,"label"),e.EFF(25,"Type"),e.k0s(),e.j41(26,"div",18)(27,"select",19)(28,"option",20),e.EFF(29,"Select paint type"),e.k0s(),e.DNE(30,C,2,2,"option",21),e.k0s()()(),e.j41(31,"div",17)(32,"label"),e.EFF(33,"Price"),e.k0s(),e.j41(34,"div",10),e.nrm(35,"input",22)(36,"div",12),e.k0s()()(),e.j41(37,"div",23),e.nrm(38,"textarea",24)(39,"div",12),e.k0s()(),e.j41(40,"div",13)(41,"div",14)(42,"span",15),e.EFF(43,"Wall"),e.k0s()(),e.j41(44,"div",16)(45,"div",17)(46,"label"),e.EFF(47,"Type"),e.k0s(),e.j41(48,"div",18)(49,"select",25)(50,"option",20),e.EFF(51,"Select paint type"),e.k0s(),e.DNE(52,b,2,2,"option",21),e.k0s()()(),e.j41(53,"div",17)(54,"label"),e.EFF(55,"Price"),e.k0s(),e.j41(56,"div",10),e.nrm(57,"input",26)(58,"div",12),e.k0s()()(),e.j41(59,"div",23),e.nrm(60,"textarea",27)(61,"div",12),e.k0s()(),e.j41(62,"div",13)(63,"div",14)(64,"span",15),e.EFF(65,"Dark Color Wall"),e.k0s()(),e.j41(66,"div",16)(67,"div",17)(68,"label"),e.EFF(69,"Number of Dark Color Walls"),e.k0s(),e.j41(70,"div",10),e.nrm(71,"input",28)(72,"div",12),e.k0s()(),e.j41(73,"div",17)(74,"label"),e.EFF(75,"Price"),e.k0s(),e.j41(76,"div",10),e.nrm(77,"input",29)(78,"div",12),e.k0s()()(),e.j41(79,"div",23),e.nrm(80,"textarea",30)(81,"div",12),e.k0s()(),e.j41(82,"div",31)(83,"div",16)(84,"div",17)(85,"label"),e.EFF(86,"Section Total (Pre-tax)"),e.k0s(),e.j41(87,"div",10),e.nrm(88,"input",32)(89,"div",12),e.k0s()(),e.j41(90,"div",17)(91,"label"),e.EFF(92,"Section Total (Post-tax)"),e.k0s(),e.j41(93,"div",10),e.nrm(94,"input",33)(95,"div",12),e.k0s()()(),e.j41(96,"div",23),e.nrm(97,"textarea",34)(98,"div",12),e.k0s()()(),e.j41(99,"div",35)(100,"button",36),e.bIt("click",function(){return o.OnAddInternalPainting()}),e.EFF(101,"Confirm"),e.k0s()()()()()()()),2&n&&(e.R7$(10),e.Y8G("formGroup",o.requirementForm),e.R7$(20),e.Y8G("ngForOf",o.ceilingTypes),e.R7$(22),e.Y8G("ngForOf",o.wallTypes))},dependencies:[I.Sq,i.qT,i.xH,i.y7,i.me,i.Q0,i.wz,i.BC,i.cb,i.j4,i.JD],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap";*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}.page-container[_ngcontent-%COMP%]{min-height:100vh;padding:2rem;background:linear-gradient(135deg,#b5ac9c 0%,#75ba9d 100%)}.form-card[_ngcontent-%COMP%]{max-width:2000px;margin:0 auto;background:rgba(255,255,255,.95);border-radius:20px;overflow:hidden;box-shadow:0 15px 35px #0000001a}.card-header[_ngcontent-%COMP%]{background:#75ba9d;padding:2rem;position:relative;overflow:hidden}.card-header[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(45deg,transparent 45%,rgba(255,255,255,.1) 45%,rgba(255,255,255,.1) 55%,transparent 55%);background-size:20px 20px}.header-content[_ngcontent-%COMP%]{position:relative;z-index:1}.card-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;font-weight:600;margin:0}.subtitle[_ngcontent-%COMP%]{color:#ffffffe6;font-size:1rem;margin-top:.5rem}.main-form[_ngcontent-%COMP%]{padding:2rem}.carpet-area-section[_ngcontent-%COMP%]{background:linear-gradient(to right,#b5ac9c,#75ba9d);padding:2px;border-radius:12px;margin-bottom:2rem}.section-highlight[_ngcontent-%COMP%]{background:white;padding:1.5rem;border-radius:10px}.highlight-label[_ngcontent-%COMP%]{color:#75ba9d;font-weight:600;font-size:1.1rem;margin-bottom:.5rem;display:block}.section-card[_ngcontent-%COMP%]{background:white;border-radius:15px;box-shadow:0 8px 25px #0000000d;overflow:hidden}.card-banner[_ngcontent-%COMP%]{background:linear-gradient(to right,#b5ac9c,#75ba9d);padding:1rem 2rem}.card-banner[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;font-weight:500}.paint-block[_ngcontent-%COMP%]{padding:2rem;border-bottom:1px solid rgba(0,0,0,.1)}.block-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1.5rem}.block-number[_ngcontent-%COMP%]{background:#75ba9d;color:#fff;padding:.5rem 1rem;border-radius:8px;margin-right:1rem;font-weight:600}.block-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-size:1.2rem;font-weight:500}.input-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}.premium-group[_ngcontent-%COMP%]{position:relative}.premium-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#555;margin-bottom:.5rem;font-size:.9rem;font-weight:500}.premium-input[_ngcontent-%COMP%]{position:relative}.premium-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.8rem 1rem;border:2px solid #eee;border-radius:8px;font-size:1rem;transition:all .3s ease}.premium-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#75ba9d}.input-line[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;width:0;height:2px;background:#75ba9d;transition:all .3s ease;transform:translate(-50%)}.premium-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ .input-line[_ngcontent-%COMP%]{width:100%}.custom-select[_ngcontent-%COMP%]{position:relative}.custom-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.8rem 1rem;border:2px solid #eee;border-radius:8px;appearance:none;background:white;cursor:pointer;font-size:1rem;transition:all .3s ease}.custom-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#75ba9d}.custom-select[_ngcontent-%COMP%]:after{position:absolute;right:1rem;top:50%;transform:translateY(-50%);color:#75ba9d;pointer-events:none;font-size:.8rem}.remarks-input[_ngcontent-%COMP%]{width:100%;padding:.8rem 1rem;border:2px solid #eee;border-radius:8px;font-size:1rem;transition:all .3s ease;resize:vertical;min-height:80px;font-family:Poppins,sans-serif}.remarks-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#75ba9d}.mt-3[_ngcontent-%COMP%]{margin-top:1rem}.total-section[_ngcontent-%COMP%]{grid-column:1 / -1;background:#f8f9fa;padding:1.5rem;border-radius:8px;margin-top:1rem}.total-section[_ngcontent-%COMP%]   .input-grid[_ngcontent-%COMP%]{margin-bottom:1rem}.confirm-btn[_ngcontent-%COMP%]{width:100%}.internalBtn[_ngcontent-%COMP%]{width:100px;height:50px;color:#000;border-radius:10%;background-color:#0e412c;cursor:pointer;margin-left:20px;margin-top:20px;margin-bottom:20px}@media (max-width: 768px){.page-container[_ngcontent-%COMP%]{padding:1rem}.card-header[_ngcontent-%COMP%]{padding:1.5rem}.card-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.main-form[_ngcontent-%COMP%]{padding:1rem}.paint-block[_ngcontent-%COMP%]{padding:1.5rem}.input-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}']})}}return r})()},1683:(M,u,a)=>{a.r(u),a.d(u,{RequiremetnModule:()=>b});var i=a(177),m=a(7062),e=a(4028),l=a(7705);const g=[{path:"",component:(()=>{class s{static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=l.VBU({type:s,selectors:[["app-view"]],decls:1,vars:0,template:function(t,n){1&t&&l.nrm(0,"router-outlet")},dependencies:[m.n3]})}}return s})(),children:[{path:"requirement",component:e.J}]}];let p=(()=>{class s{static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275mod=l.$C({type:s})}static{this.\u0275inj=l.G2t({imports:[m.iI.forChild(g),m.iI]})}}return s})();var h=a(8834),P=a(882),f=a(9417),I=a(9631),C=a(2798);let b=(()=>{class s{static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275mod=l.$C({type:s})}static{this.\u0275inj=l.G2t({imports:[i.MD,p,f.X1,h.Hl,P.RG,I.fS,C.Ve]})}}return s})()}}]);