"use strict";(self.webpackChunkRepainters=self.webpackChunkRepainters||[]).push([[84],{1084:(M,m,p)=>{p.r(m),p.d(m,{WallpaperModule:()=>v});var a=p(177),t=p(7705);let h=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-view"]],decls:2,vars:0,template:function(s,P){1&s&&(t.j41(0,"p"),t.EFF(1,"view works!"),t.k0s())}})}}return i})();var c=p(7062);const w=[{path:"",component:h,children:[{path:"wallpaper",component:p(3158).s}]}];let b=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[c.iI.forChild(w),c.iI]})}}return i})();var C=p(9417);let v=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[a.MD,b,C.X1]})}}return i})()},3158:(M,m,p)=>{p.d(m,{s:()=>k});var a=p(9417),t=p(7705),h=p(7062),c=p(4412);class d{}var w=p(6813),b=p(1626);let C=(()=>{class o{constructor(e){this.httpClient=e,this.baseUrl=w.c.backend.baseURL,this.wallpaperMethod=this.baseUrl+"v1/wallpaper"}addWallpaper(e){return this.httpClient.post(this.wallpaperMethod+"/create",e)}listWallpaper(e=""){return this.httpClient.get(this.wallpaperMethod+e)}updateWallpaper(e){return this.httpClient.post(`${this.wallpaperMethod}/update/${e.wallpaperId}`,e)}deleteWallpaper(e){return this.httpClient.delete(`${this.wallpaperMethod}/delete/${e}`)}getWallpaperByCustomerId(e){return this.httpClient.get(`${this.wallpaperMethod}/customer/${e}`)}static{this.\u0275fac=function(r){return new(r||o)(t.KVO(b.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var v=p(5794);let i=(()=>{class o{get wallpaper(){return this._wallpaper.asObservable()}get wallpapers(){return this._wallpapers.asObservable()}constructor(e,r){this.WallpaperSerivce=e,this.toaster=r,this._wallpaper=new c.t([]),this.wallpaperList={wallpaper:[]},this._wallpapers=new c.t(new d),this.currentWallpaper={_wallpapers:new d}}addWallpaper(e){e.forEach(r=>{this.WallpaperSerivce.addWallpaper(r).subscribe(n=>{r.wallpaperId=n.created_id,this.wallpaperList.wallpaper.push(r),this._wallpaper.next([...this.wallpaperList.wallpaper]),this.toaster.success("Wallpaper Confirmed Successfully","Confirmation")})})}listWallpaper(){this.WallpaperSerivce.listWallpaper().subscribe(e=>{this.wallpaperList.wallpaper=e,this._wallpaper.next(Object.assign({},this.wallpaperList).wallpaper)})}updateWallpaper(e){e.forEach(r=>{this.WallpaperSerivce.updateWallpaper(r).subscribe(()=>{const n=this.wallpaperList.wallpaper.findIndex(l=>l.wallpaperId===r.wallpaperId);-1!==n&&(this.wallpaperList.wallpaper[n]=r),this._wallpaper.next([...this.wallpaperList.wallpaper]),this.toaster.success("Wallpaper Updated Successfully","Confirmation")})})}getWallpaperByCustomerId(e,r){return this.WallpaperSerivce.getWallpaperByCustomerId(e)}static{this.\u0275fac=function(r){return new(r||o)(t.KVO(C),t.KVO(v.tw))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var O=p(177);function u(o,f){if(1&o&&(t.j41(0,"option",35),t.EFF(1),t.k0s()),2&o){const e=f.$implicit;t.Y8G("value",e),t.R7$(1),t.JRh(e)}}function s(o,f){1&o&&(t.j41(0,"div",36),t.EFF(1," \u26a0\ufe0f Number of rolls exceeds the limit of 20! "),t.k0s())}function P(o,f){if(1&o){const e=t.RV6();t.j41(0,"div",9)(1,"div",10)(2,"span",11),t.EFF(3),t.k0s(),t.j41(4,"div",12),t.nrm(5,"span",13),t.j41(6,"button",14),t.bIt("click",function(){const l=t.eBV(e).index,g=t.XpG();return t.Njj(g.removeWallpaper(l))}),t.EFF(7,"Remove"),t.k0s()()(),t.j41(8,"form",15)(9,"div",16)(10,"label",17),t.EFF(11,"Product Type"),t.k0s(),t.j41(12,"div",18)(13,"select",19)(14,"option",20),t.EFF(15,"Select product type"),t.k0s(),t.DNE(16,u,2,2,"option",21),t.k0s()()(),t.j41(17,"div",16)(18,"label",17),t.EFF(19,"Product Code"),t.k0s(),t.j41(20,"div",22),t.nrm(21,"input",23),t.k0s()(),t.j41(22,"div",16)(23,"label",17),t.EFF(24,"Number of Rolls"),t.k0s(),t.j41(25,"div",22),t.nrm(26,"input",24),t.k0s(),t.DNE(27,s,2,0,"div",25),t.k0s(),t.j41(28,"div",16)(29,"label",17),t.EFF(30,"Price"),t.k0s(),t.j41(31,"div",22)(32,"span",26),t.EFF(33,"\u20b9"),t.k0s(),t.nrm(34,"input",27),t.k0s()(),t.j41(35,"div",16)(36,"label",17),t.EFF(37,"Remarks"),t.k0s(),t.j41(38,"div",22),t.nrm(39,"input",28),t.k0s()()(),t.j41(40,"div",29)(41,"div",30)(42,"span",31),t.EFF(43,"Section Total Wallpaper B"),t.k0s(),t.j41(44,"div",32),t.nrm(45,"input",33),t.k0s(),t.j41(46,"div",34)(47,"span"),t.EFF(48),t.k0s()()()()()}if(2&o){const e=f.index,r=t.XpG();let n,l;t.Y8G("formGroup",r.getWallpaperGroup(e)),t.R7$(3),t.SpI("Wall ",e+1,""),t.R7$(5),t.Y8G("formGroup",r.getWallpaperGroup(e)),t.R7$(8),t.Y8G("ngForOf",r.productTypes),t.R7$(11),t.Y8G("ngIf",null==(n=r.getWallpaperGroup(e).get("noOfRolls"))||null==n.errors?null:n.errors.rollsLimitExceeded),t.R7$(21),t.SpI("Total Rows: ",null==(l=r.wallpaperForm.get("totalRows"))?null:l.value,"")}}let k=(()=>{class o{constructor(e,r,n){this.fb=e,this.route=r,this.wallpaperProvider=n,this.customerId=null,this.productTypes=["Budget","Premium","Luxury","Custom"],this.pricerates={Budget:7500,Premium:15e3,Luxury:25e3,Custom:35e3},this.wallpaperForm=this.fb.group({wallpapers:this.fb.array([]),wallpaperTotal:[0],totalRows:[0]})}ngOnInit(){this.extractCustomerId(),this.setupDataRetrieval()}extractCustomerId(){this.route.paramMap.subscribe(e=>{const r=e.get("customerId");this.customerId=r?parseInt(r,10):null,this.customerId&&this.retrieveWallpaperData(this.customerId)})}setupDataRetrieval(){this.route.parent?.paramMap.subscribe(e=>{const r=e.get("customerId"),n=r?parseInt(r,10):null;n&&n!==this.customerId&&(this.customerId=n,this.retrieveWallpaperData(this.customerId))})}retrieveWallpaperData(e){this.wallpaperProvider.getWallpaperByCustomerId(e,{deleted:0}).subscribe(r=>{this.clearWallpapers(),r.forEach(n=>this.addWallpaperFromData(n))})}clearWallpapers(){for(;0!==this.wallpapers.length;)this.wallpapers.removeAt(0)}addWallpaperFromData(e){const r=this.fb.group({productType:[e.productType,a.k0.required],productCode:[e.productCode,a.k0.required],noOfRolls:[e.noOfRolls,[a.k0.required,a.k0.min(1),this.rollsLimitValidator]],price:[e.price,a.k0.required],remarks:[e.remarks,a.k0.required],sectionTotal:[e.sectionTotal,a.k0.required]});this.wallpapers.push(r),r.valueChanges.subscribe(()=>{this.calculatePrices()}),this.updateRowCount()}get wallpapers(){return this.wallpaperForm.get("wallpapers")}getWallpaperGroup(e){return this.wallpapers.at(e)}rollsLimitValidator(e){return e.value>20?{rollsLimitExceeded:!0}:null}addNewWallpaper(){const e=this.fb.group({productType:["",a.k0.required],productCode:["",a.k0.required],noOfRolls:[0,[a.k0.required,a.k0.min(1),this.rollsLimitValidator]],price:[0,a.k0.required],remarks:["",a.k0.required],sectionTotal:["",a.k0.required]});this.wallpapers.push(e),e.valueChanges.subscribe(()=>{this.calculatePrices()}),this.updateRowCount()}onConfirmWallpaper(){if(!this.customerId)return void console.error("Customer ID is required");const e=this.wallpapers.controls.map(l=>({customerId:this.customerId,productType:l.get("productType")?.value,productCode:l.get("productCode")?.value,noOfRolls:l.get("noOfRolls")?.value,price:l.get("price")?.value,remarks:l.get("remarks")?.value,sectionTotal:l.get("sectionTotal")?.value.toString(),deleted:!1,createdBy:this.customerId,createdOn:new Date,lastModifiedDate:new Date,lastModifiedBy:this.customerId})),r=e.filter(l=>!l.wallpaperId),n=e.filter(l=>l.wallpaperId);r.length>0&&this.wallpaperProvider.addWallpaper(r),n.length>0&&this.wallpaperProvider.updateWallpaper(n)}calculatePrices(){let e=0;this.wallpapers.controls.forEach(r=>{const n=r.get("productType")?.value,x=(r.get("noOfRolls")?.value||0)*(this.pricerates[n]||0);r.get("price")?.setValue(x,{emitEvent:!1});const y=x.toFixed(2);r.get("sectionTotal")?.setValue(y,{emitEvent:!1}),e+=x}),this.wallpaperForm.get("wallpaperTotal")?.setValue(e.toFixed(2),{emitEvent:!1}),this.updateRowCount()}updateRowCount(){const e=this.wallpapers.length;this.wallpaperForm.get("totalRows")?.setValue(e,{emitEvent:!1})}removeWallpaper(e){this.wallpapers.removeAt(e),this.calculatePrices()}static{this.\u0275fac=function(r){return new(r||o)(t.rXU(a.ok),t.rXU(h.nX),t.rXU(i))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-wallpaper"]],decls:14,vars:1,consts:[[1,"main-container"],[1,"header"],[1,"title"],[1,"add-wall-btn",3,"click"],[1,"plus-icon"],[1,"walls-container"],["class","wall-card",3,"formGroup",4,"ngFor","ngForOf"],[1,"confirm-section"],[1,"confirm-btn",3,"click"],[1,"wall-card",3,"formGroup"],[1,"wall-header"],[1,"wall-number"],[1,"wall-actions"],[1,"wall-drag-handle"],[1,"remove-btn",3,"click"],[1,"form-grid",3,"formGroup"],[1,"form-group"],[1,"form-label"],[1,"select-wrapper"],["formControlName","productType"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"input-wrapper"],["type","text","formControlName","productCode","placeholder","Enter product code"],["type","number","formControlName","noOfRolls","placeholder","Number of rolls"],["class","warning",4,"ngIf"],[1,"input-prefix"],["type","number","formControlName","price","placeholder","Amount"],["type","text","formControlName","remarks","placeholder","Enter Remarks"],[1,"total-section"],[1,"total-content"],[1,"total-label"],[1,"total-input-wrapper"],["type","text","formControlName","sectionTotal","placeholder","0.00","readonly",""],[1,"row-count"],[3,"value"],[1,"warning"]],template:function(r,n){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"h2",2),t.EFF(3,"C. Wallpaper"),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){return n.addNewWallpaper()}),t.j41(5,"span",4),t.EFF(6,"+"),t.k0s(),t.j41(7,"span"),t.EFF(8,"Add New Wallpaper"),t.k0s()()(),t.j41(9,"div",5),t.DNE(10,P,49,6,"div",6),t.j41(11,"div",7)(12,"button",8),t.bIt("click",function(){return n.onConfirmWallpaper()}),t.EFF(13," Confirm Wallpaper "),t.k0s()()()()),2&r&&(t.R7$(10),t.Y8G("ngForOf",n.wallpapers.controls))},dependencies:[O.Sq,O.bT,a.qT,a.xH,a.y7,a.me,a.Q0,a.wz,a.BC,a.cb,a.j4,a.JD],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap";*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}.main-container[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;box-shadow:0 10px 30px #0000000d;max-width:2000px;margin:0 auto;background:linear-gradient(135deg,#b5ac9c 0%,#75ba9d 100%)}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:2px solid #75ba9d}.title[_ngcontent-%COMP%]{font-size:1.8rem;color:#000;font-weight:600;position:relative;padding-left:1rem}.title[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:4px;height:70%;background:#75ba9d;border-radius:2px}.add-wall-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#75ba9d,#b5ac9c);border:none;padding:.8rem 1.5rem;border-radius:12px;color:#fff;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:transform .2s,box-shadow .2s}.add-wall-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #75ba9d4d}.plus-icon[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.remove-btn[_ngcontent-%COMP%]{background:#fff;color:#dc3545;border:2px solid #dc3545;padding:.5rem 1rem;border-radius:8px;display:flex;align-items:center;gap:.5rem;cursor:pointer;transition:all .3s ease;font-size:.9rem;font-weight:500}.remove-btn[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff;transform:translateY(-2px);box-shadow:0 4px 8px #dc354533}.walls-container[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.wall-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:16px;overflow:hidden;transition:transform .3s,box-shadow .3s;border:1px solid rgba(181,172,156,.2)}.wall-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 20px #0000000d}.wall-header[_ngcontent-%COMP%]{background:linear-gradient(to right,rgba(117,186,157,.1),rgba(181,172,156,.1));padding:1rem 1.5rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(0,0,0,.05)}.wall-number[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;font-size:1.1rem}.wall-drag-handle[_ngcontent-%COMP%]{color:#b5ac9c;cursor:move;font-size:1.2rem;-webkit-user-select:none;user-select:none}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;padding:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-label[_ngcontent-%COMP%]{font-size:.9rem;color:#555;font-weight:500}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .select-wrapper[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.8rem 1rem;border:2px solid rgba(181,172,156,.2);border-radius:10px;font-size:.95rem;transition:all .3s ease;background:white}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .select-wrapper[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#75ba9d;box-shadow:0 0 0 3px #75ba9d1a}.input-prefix[_ngcontent-%COMP%], .input-suffix[_ngcontent-%COMP%]{position:absolute;color:#666;font-size:.9rem}.input-prefix[_ngcontent-%COMP%]{left:1rem}.input-suffix[_ngcontent-%COMP%]{right:1rem}.input-wrapper[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .input-wrapper[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding-left:2rem}.select-wrapper[_ngcontent-%COMP%]{position:relative}.select-arrow[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);color:#75ba9d;pointer-events:none;font-size:.8rem}.total-section[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem;border-top:2px dashed rgba(181,172,156,.3)}.total-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:black;padding:1.5rem;border-radius:12px;color:#fff}.total-label[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem}.total-input-wrapper[_ngcontent-%COMP%]{position:relative;width:200px}.total-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.8rem 1rem .8rem 2rem;border:2px solid rgba(255,255,255,.2);border-radius:8px;background:rgba(255,255,255,.1);color:#fff;font-size:1.1rem;font-weight:500}.total-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff9}.total-input-wrapper[_ngcontent-%COMP%]   .input-prefix[_ngcontent-%COMP%]{color:#fff}.confirm-btn[_ngcontent-%COMP%]{width:100%}.confirm-btn[_ngcontent-%COMP%]{width:auto;height:50px;color:#000;border-radius:30%;background-color:#0e412c;cursor:pointer;margin-left:20px;margin-top:20px;margin-bottom:20px;padding:10px}@keyframes _ngcontent-%COMP%_fadeSlideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.wall-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeSlideIn .3s ease-out forwards}@media (max-width: 768px){.main-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.total-content[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.total-input-wrapper[_ngcontent-%COMP%]{width:100%}}']})}}return o})()}}]);