"use strict";(self.webpackChunkRepainters=self.webpackChunkRepainters||[]).push([[386],{386:(Ne,F,d)=>{d.r(F),d.d(F,{ProductModule:()=>De});var f=d(177),u=d(33),$=d(467),I=d(1413),P=d(7468),c=d(6977),C=d(980),O=d(1397),j=d(6354),g=d(5351),e=d(7705),E=d(9437),R=d(5558),w=d(6813),T=d(1626);let b=(()=>{class n{constructor(t){this.http=t,this.baseUrl=`${w.c.backend.baseURL}v1/Product`}createCategory(t){return this.http.post(`${this.baseUrl}/category`,t)}updateCategory(t){return this.http.put(`${this.baseUrl}/category`,t)}deleteCategory(t,i){return this.http.delete(`${this.baseUrl}/category/${t}/${i}`)}getCategories(t,i){return this.http.get(`${this.baseUrl}/categories/${t}/${i}`)}createFolder(t){return console.log("Sending folder data:",JSON.stringify(t,null,2)),this.http.post(`${this.baseUrl}/folder`,t).pipe((0,E.W)(i=>{throw console.error("Server error response:",i),i}))}updateFolder(t){return this.http.put(`${this.baseUrl}/folder`,t)}deleteFolder(t,i){return this.http.delete(`${this.baseUrl}/folder/${t}/${i}`)}getFolders(t,i,r){return this.http.get(`${this.baseUrl}/folders/${t}/${i}/${r}`)}uploadFile(t,i,r){return this.getFiles(0,0,0).pipe((0,R.n)(_=>{const h=_.length<5?314572800:31457280;if(t.size>h)throw new Error(`File size exceeds the limit of ${h/1048576}MB`);const p=new FormData;return p.append("uploadedFile",t),p.append("folderId",i.toString()),p.append("categoryId",r.toString()),p.append("customerId","1"),p.append("userId","1"),this.http.post(`${this.baseUrl}/file`,p)}))}deleteFile(t,i){return this.http.delete(`${this.baseUrl}/file/${t}/${i}`)}getFiles(t,i,r){return this.http.get(`${this.baseUrl}/files/${t}/${i}/${r}`)}checkCategoryExists(t,i){return this.http.get(`${this.baseUrl}/category/exists/${encodeURIComponent(t)}/${i}`)}static{this.\u0275fac=function(i){return new(i||n)(e.KVO(T.Qq))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var m=d(5416),l=d(9417);let G=(()=>{class n{constructor(t,i,r,s){this.dialogRef=t,this.catalogService=i,this.snackBar=r,this.data=s,this.categoryName="",this.isSaving=!1}onSave(){this.categoryName?(this.isSaving=!0,this.catalogService.checkCategoryExists(this.categoryName,this.data.customerId).subscribe({next:t=>{t?(this.snackBar.open("Category name already exists","Close",{duration:3e3}),this.isSaving=!1):this.saveCategory()},error:t=>{console.error("Error checking category existence:",t),this.isSaving=!1}})):this.snackBar.open("Category name is required","Close",{duration:3e3})}saveCategory(){this.catalogService.createCategory({categoryId:0,name:this.categoryName,customerId:this.data.customerId,userId:this.data.userId,createdBy:this.data.userId,createdOn:new Date,isDeleted:!1}).subscribe({next:i=>{this.dialogRef.close(i)},error:i=>{console.error("Error creating category:",i),this.isSaving=!1}})}closeDialog(){this.dialogRef.close()}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(g.CP),e.rXU(b),e.rXU(m.UG),e.rXU(g.Vh))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-addproduct"]],decls:16,vars:3,consts:[[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"category-form",3,"ngSubmit"],[1,"form-group"],["for","categoryName"],["id","categoryName","name","categoryName","type","text","placeholder","Enter category name","required","",3,"ngModel","ngModelChange"],[1,"form-actions"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"]],template:function(i,r){1&i&&(e.j41(0,"div",0)(1,"h2"),e.EFF(2,"Create New Category"),e.k0s(),e.j41(3,"button",1),e.bIt("click",function(){return r.closeDialog()}),e.nrm(4,"i",2),e.k0s()(),e.j41(5,"div",3)(6,"form",4),e.bIt("ngSubmit",function(){return r.onSave()}),e.j41(7,"div",5)(8,"label",6),e.EFF(9,"Category Name"),e.k0s(),e.j41(10,"input",7),e.bIt("ngModelChange",function(a){return r.categoryName=a}),e.k0s()(),e.j41(11,"div",8)(12,"button",9),e.bIt("click",function(){return r.closeDialog()}),e.EFF(13,"Cancel"),e.k0s(),e.j41(14,"button",10),e.EFF(15),e.k0s()()()()),2&i&&(e.R7$(10),e.Y8G("ngModel",r.categoryName),e.R7$(4),e.Y8G("disabled",r.isSaving),e.R7$(1),e.SpI(" ",r.isSaving?"Saving...":"Save"," "))},dependencies:[l.qT,l.me,l.BC,l.cb,l.YS,l.vS,l.cV],styles:[".modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid #e0e0e0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:1.2rem;color:#666}.modal-body[_ngcontent-%COMP%]{padding:16px}.category-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:8px;border:1px solid #e0e0e0;border-radius:4px;font-size:1rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;margin-top:16px}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer}"]})}}return n})();var k=d(345),y=d(8834);function S(n,o){if(1&n&&e.nrm(0,"img",8),2&n){const t=e.XpG();e.Y8G("src",t.fileUrl,e.B4B)("alt",t.data.file.name)}}function D(n,o){if(1&n&&e.nrm(0,"iframe",9),2&n){const t=e.XpG();e.Y8G("src",t.fileUrl,e.f$h)}}function N(n,o){if(1&n&&e.nrm(0,"video",10),2&n){const t=e.XpG();e.Y8G("src",t.fileUrl,e.B4B)}}function X(n,o){if(1&n&&e.nrm(0,"audio",11),2&n){const t=e.XpG();e.Y8G("src",t.fileUrl,e.B4B)}}function V(n,o){if(1&n&&(e.j41(0,"div",12),e.nrm(1,"i",13),e.j41(2,"p"),e.EFF(3,"Preview not available for this file type"),e.k0s(),e.j41(4,"a",14),e.nrm(5,"i",15),e.EFF(6," Download File "),e.k0s()()),2&n){const t=e.XpG();e.R7$(4),e.Y8G("href",t.fileUrl,e.B4B)}}let M=(()=>{class n{constructor(t,i){this.data=t,this.sanitizer=i,this.determineFileType(),this.fileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(`${w.c.backend.baseURL}${t.file.filePath}`)}determineFileType(){const t=this.data.file.fileType.toLowerCase();this.isImage=t.startsWith("image/"),this.isPdf="application/pdf"===t,this.isVideo=t.startsWith("video/"),this.isAudio=t.startsWith("audio/"),this.isSupported=this.isImage||this.isPdf||this.isVideo||this.isAudio}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(g.Vh),e.rXU(k.up))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-add-preview"]],decls:11,vars:6,consts:[["mat-dialog-title",""],["class","preview-image",3,"src","alt",4,"ngIf"],["width","100%","height","600px","frameborder","0",3,"src",4,"ngIf"],["controls","","class","preview-video",3,"src",4,"ngIf"],["controls","","class","preview-audio",3,"src",4,"ngIf"],["class","unsupported-message",4,"ngIf"],["align","end"],["mat-button","","mat-dialog-close",""],[1,"preview-image",3,"src","alt"],["width","100%","height","600px","frameborder","0",3,"src"],["controls","",1,"preview-video",3,"src"],["controls","",1,"preview-audio",3,"src"],[1,"unsupported-message"],[1,"fas","fa-file"],["target","_blank",1,"download-link",3,"href"],[1,"fas","fa-download"]],template:function(i,r){1&i&&(e.j41(0,"h2",0),e.EFF(1),e.k0s(),e.j41(2,"mat-dialog-content"),e.DNE(3,S,1,2,"img",1),e.DNE(4,D,1,1,"iframe",2),e.DNE(5,N,1,1,"video",3),e.DNE(6,X,1,1,"audio",4),e.DNE(7,V,7,1,"div",5),e.k0s(),e.j41(8,"mat-dialog-actions",6)(9,"button",7),e.EFF(10,"Close"),e.k0s()()),2&i&&(e.R7$(1),e.JRh(r.data.file.name),e.R7$(2),e.Y8G("ngIf",r.isImage),e.R7$(1),e.Y8G("ngIf",r.isPdf),e.R7$(1),e.Y8G("ngIf",r.isVideo),e.R7$(1),e.Y8G("ngIf",r.isAudio),e.R7$(1),e.Y8G("ngIf",!r.isSupported))},dependencies:[f.bT,g.tx,g.BI,g.Yi,g.E7,y.$z],styles:[".preview-image[_ngcontent-%COMP%]{max-width:100%;max-height:160vh;margin:0 auto;display:block}.preview-video[_ngcontent-%COMP%], .preview-audio[_ngcontent-%COMP%]{width:100%}.unsupported-message[_ngcontent-%COMP%]{text-align:center;padding:2rem}.download-link[_ngcontent-%COMP%]{display:inline-block;margin-top:1rem;padding:.5rem 1rem;background-color:#007bff;color:#fff;text-decoration:none;border-radius:4px}.download-link[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}}return n})();function U(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",27),e.bIt("click",function(){const s=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.openCategoryInNewTab(s))}),e.j41(1,"div",28),e.nrm(2,"i",29),e.k0s(),e.j41(3,"div",30)(4,"h3"),e.EFF(5),e.k0s()()()}if(2&n){const t=o.$implicit;e.R7$(5),e.JRh(t.name)}}function L(n,o){if(1&n&&(e.j41(0,"div",17)(1,"h1"),e.EFF(2,"Dashboard"),e.k0s(),e.j41(3,"div",18)(4,"div",19),e.nrm(5,"i",20),e.j41(6,"div",21)(7,"h3"),e.EFF(8,"Total Products"),e.k0s(),e.j41(9,"p"),e.EFF(10),e.k0s()()(),e.j41(11,"div",19),e.nrm(12,"i",22),e.j41(13,"div",21)(14,"h3"),e.EFF(15,"Categories"),e.k0s(),e.j41(16,"p"),e.EFF(17),e.k0s()()(),e.j41(18,"div",19),e.nrm(19,"i",23),e.j41(20,"div",21)(21,"h3"),e.EFF(22,"Recent Uploads"),e.k0s(),e.j41(23,"p"),e.EFF(24),e.k0s()()()(),e.j41(25,"div",24)(26,"h2"),e.EFF(27,"Categories"),e.k0s(),e.j41(28,"div",25),e.DNE(29,U,6,1,"div",26),e.k0s()()()),2&n){const t=e.XpG();e.R7$(10),e.JRh(t.dashboardStats.totalProducts),e.R7$(7),e.JRh(t.categories.length),e.R7$(7),e.JRh(t.dashboardStats.recentUploads),e.R7$(5),e.Y8G("ngForOf",t.categories)}}function Y(n,o){1&n&&(e.j41(0,"div",40),e.nrm(1,"i",41),e.j41(2,"p"),e.EFF(3,"Loading contents..."),e.k0s()())}function B(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",42),e.nrm(1,"i",43),e.j41(2,"p"),e.EFF(3),e.k0s(),e.j41(4,"button",44),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.loadCategoryContents(r.selectedCategory.categoryId))}),e.EFF(5," Retry "),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(3),e.JRh(t.error)}}function A(n,o){if(1&n&&(e.j41(0,"div",52),e.nrm(1,"i",8),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&n){const t=o.$implicit;e.R7$(3),e.JRh(t.name)}}function z(n,o){if(1&n&&(e.j41(0,"div",49)(1,"h3"),e.EFF(2,"Folders"),e.k0s(),e.j41(3,"div",50),e.DNE(4,A,4,1,"div",51),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.Y8G("ngForOf",t.currentFolders)}}function Q(n,o){if(1&n&&(e.j41(0,"div",56),e.nrm(1,"i"),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&n){const t=o.$implicit,i=e.XpG(4);e.R7$(1),e.HbH("fas "+i.getFileTypeIcon(t)),e.R7$(2),e.JRh(t.name)}}function J(n,o){if(1&n&&(e.j41(0,"div",53)(1,"h3"),e.EFF(2,"Files"),e.k0s(),e.j41(3,"div",54),e.DNE(4,Q,4,3,"div",55),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.Y8G("ngForOf",t.currentFiles)}}function H(n,o){1&n&&(e.j41(0,"div",57),e.nrm(1,"i",29),e.j41(2,"p"),e.EFF(3,"No content in this category"),e.k0s()())}function W(n,o){if(1&n&&(e.j41(0,"div",45),e.DNE(1,z,5,1,"div",46),e.DNE(2,J,5,1,"div",47),e.DNE(3,H,4,0,"div",48),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngIf",t.currentFolders.length>0),e.R7$(1),e.Y8G("ngIf",t.currentFiles.length>0),e.R7$(1),e.Y8G("ngIf",0===t.currentFolders.length&&0===t.currentFiles.length)}}function Z(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",31)(1,"div",32)(2,"div",33)(3,"h2"),e.EFF(4),e.k0s(),e.j41(5,"button",34),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeModal())}),e.nrm(6,"i",35),e.k0s()(),e.j41(7,"div",36),e.DNE(8,Y,4,0,"div",37),e.DNE(9,B,6,1,"div",38),e.DNE(10,W,4,3,"div",39),e.k0s()()()}if(2&n){const t=e.XpG();e.AVh("show",t.selectedCategory),e.R7$(4),e.JRh(t.selectedCategory.name),e.R7$(4),e.Y8G("ngIf",t.isLoading),e.R7$(1),e.Y8G("ngIf",t.error),e.R7$(1),e.Y8G("ngIf",!t.isLoading&&!t.error)}}function K(n,o){if(1&n){const t=e.RV6();e.j41(0,"button",44),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.navigateUp())}),e.nrm(1,"i",68),e.EFF(2," Back "),e.k0s()}}function q(n,o){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.R7$(1),e.SpI(" / ",t," ")}}function ee(n,o){if(1&n){const t=e.RV6();e.j41(0,"button",69),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.openCreateCategoryDialog())}),e.nrm(1,"i",70),e.EFF(2," Create Category "),e.k0s()}}function te(n,o){if(1&n&&(e.j41(0,"div",76)(1,"small",77),e.EFF(2),e.nrm(3,"br"),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(2),e.SpI(" Files in folder: ",t.currentFolder.files.length,"/5 "),e.R7$(2),e.SpI(" Size limit: ",t.currentFolder.files.length<5?"Up to 300MB":"Up to 30MB"," ")}}const ie=function(n,o){return{"fa-file-upload":n,"fa-spinner fa-spin":o}};function ne(n,o){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"button",69),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.createNewFolder())}),e.nrm(2,"i",71),e.EFF(3," New Folder "),e.k0s(),e.j41(4,"label",72),e.nrm(5,"i",73),e.EFF(6),e.j41(7,"input",74),e.bIt("change",function(r){e.eBV(t);const s=e.XpG(2);return e.Njj(s.uploadFile(r))}),e.k0s()(),e.DNE(8,te,5,2,"div",75),e.bVm()}if(2&n){const t=e.XpG(2);e.R7$(5),e.Y8G("ngClass",e.l_i(4,ie,!t.isLoading,t.isLoading)),e.R7$(1),e.SpI(" ",t.isLoading?"Uploading...":"Upload File"," "),e.R7$(1),e.Y8G("disabled",t.isLoading),e.R7$(1),e.Y8G("ngIf",null==t.currentFolder?null:t.currentFolder.files)}}function re(n,o){1&n&&(e.j41(0,"div",40),e.nrm(1,"i",41),e.j41(2,"p"),e.EFF(3,"Loading..."),e.k0s()())}function oe(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",42),e.nrm(1,"i",43),e.j41(2,"p"),e.EFF(3),e.k0s(),e.j41(4,"button",44),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.loadInitialData())}),e.EFF(5,"Retry"),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(3),e.JRh(t.error)}}function se(n,o){1&n&&e.nrm(0,"i",29)}function ae(n,o){1&n&&e.nrm(0,"i",8)}function ce(n,o){if(1&n&&e.nrm(0,"i"),2&n){const t=e.XpG().$implicit,i=e.XpG(3);e.HbH("fas "+(i.isFile(t)?i.getFileTypeIcon(t):"fa-file"))}}function de(n,o){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"input",94),e.bIt("ngModelChange",function(r){e.eBV(t);const s=e.XpG(4);return e.Njj(s.newItemName=r)})("blur",function(){e.eBV(t);const r=e.XpG(4);return e.Njj(r.finishRename())})("keyup.enter",function(){e.eBV(t);const r=e.XpG(4);return e.Njj(r.finishRename())}),e.k0s(),e.bVm()}if(2&n){const t=e.XpG(4);e.R7$(1),e.Y8G("ngModel",t.newItemName)}}function le(n,o){if(1&n&&(e.j41(0,"span",95),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(1),e.SpI(" ",t.name," ")}}function ge(n,o){if(1&n){const t=e.RV6();e.j41(0,"button",96),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.previewFile(r))}),e.nrm(1,"i",97),e.k0s()}}function fe(n,o){if(1&n){const t=e.RV6();e.j41(0,"button",98),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.onItemDoubleClick(r))}),e.nrm(1,"i",99),e.k0s()}}function pe(n,o){if(1&n&&(e.j41(0,"span",104),e.nrm(1,"i",89),e.EFF(2),e.k0s()),2&n){const t=e.XpG(3).$implicit,i=e.XpG(3);e.R7$(2),e.SpI(" Modified: ",i.formatDate(t.lastModifiedOn)," ")}}function ue(n,o){if(1&n&&(e.j41(0,"div",103)(1,"span",104),e.nrm(2,"i",105),e.EFF(3),e.k0s(),e.DNE(4,pe,3,1,"span",106),e.k0s()),2&n){const t=e.XpG(2).$implicit,i=e.XpG(3);e.R7$(3),e.SpI(" ",i.formatDate(t.createdOn)," "),e.R7$(1),e.Y8G("ngIf",t.lastModifiedOn)}}function he(n,o){if(1&n&&(e.j41(0,"div",107)(1,"span",104),e.nrm(2,"i",105),e.EFF(3),e.k0s()()),2&n){const t=e.XpG(2).$implicit,i=e.XpG(3);e.R7$(3),e.SpI(" Created: ",i.formatDate(t.createdOn)," ")}}function _e(n,o){if(1&n&&(e.j41(0,"div",100),e.DNE(1,ue,5,2,"div",101),e.DNE(2,he,4,1,"div",102),e.k0s()),2&n){const t=e.XpG().$implicit,i=e.XpG(3);e.R7$(1),e.Y8G("ngIf",i.isFile(t)),e.R7$(1),e.Y8G("ngIf",i.isFolder(t))}}function me(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",80),e.bIt("click",function(){const s=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.selectedItem=s)})("dblclick",function(){const s=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.onItemDoubleClick(s))}),e.j41(1,"div",81),e.qex(2,82),e.DNE(3,se,1,0,"i",83),e.DNE(4,ae,1,0,"i",84),e.DNE(5,ce,1,2,"i",85),e.bVm(),e.DNE(6,de,2,1,"ng-container",65),e.DNE(7,le,2,1,"span",86),e.k0s(),e.j41(8,"div",63),e.DNE(9,ge,2,0,"button",87),e.j41(10,"button",88),e.bIt("click",function(){const s=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.startRename(s))}),e.nrm(11,"i",89),e.k0s(),e.j41(12,"button",90),e.bIt("click",function(){const s=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.deleteItem(s))}),e.nrm(13,"i",91),e.k0s(),e.DNE(14,fe,2,0,"button",92),e.k0s(),e.DNE(15,_e,3,2,"div",93),e.k0s()}if(2&n){const t=o.$implicit,i=e.XpG(3);e.AVh("selected",i.selectedItem===t),e.R7$(2),e.Y8G("ngSwitch",!0),e.R7$(1),e.Y8G("ngSwitchCase",i.isCategory(t)),e.R7$(1),e.Y8G("ngSwitchCase",i.isFolder(t)),e.R7$(1),e.Y8G("ngSwitchCase",i.isFile(t)),e.R7$(1),e.Y8G("ngIf",i.isRenaming&&i.selectedItem===t),e.R7$(1),e.Y8G("ngIf",!(i.isRenaming&&i.selectedItem===t)),e.R7$(2),e.Y8G("ngIf",i.isFile(t)),e.R7$(5),e.Y8G("ngIf",i.isCategory(t)||i.isFolder(t)&&!i.currentFolder),e.R7$(1),e.Y8G("ngIf",i.selectedItem===t)}}function ve(n,o){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"button",69),e.bIt("click",function(){e.eBV(t);const r=e.XpG(4);return e.Njj(r.openCreateCategoryDialog())}),e.EFF(2," Create New Category "),e.k0s(),e.bVm()}}function Ce(n,o){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"button",69),e.bIt("click",function(){e.eBV(t);const r=e.XpG(4);return e.Njj(r.createNewFolder())}),e.EFF(2," Create New Folder "),e.k0s(),e.bVm()}}function be(n,o){if(1&n&&(e.j41(0,"div",57),e.nrm(1,"i",29),e.j41(2,"p"),e.EFF(3,"No items found in this location"),e.k0s(),e.DNE(4,ve,3,0,"ng-container",65),e.DNE(5,Ce,3,0,"ng-container",65),e.k0s()),2&n){const t=e.XpG(3);e.R7$(4),e.Y8G("ngIf",!t.currentCategory),e.R7$(1),e.Y8G("ngIf",t.currentCategory)}}function ye(n,o){if(1&n&&(e.j41(0,"div",78),e.DNE(1,me,16,11,"div",79),e.DNE(2,be,6,2,"div",48),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngForOf",t.getCurrentItems()),e.R7$(1),e.Y8G("ngIf",0===t.getCurrentItems().length)}}function xe(n,o){if(1&n&&(e.j41(0,"div",58)(1,"div",59)(2,"div",60),e.DNE(3,K,3,0,"button",61),e.j41(4,"h2"),e.DNE(5,q,2,1,"span",62),e.k0s()(),e.j41(6,"div",63),e.DNE(7,ee,3,0,"button",64),e.DNE(8,ne,9,7,"ng-container",65),e.k0s()(),e.j41(9,"div",66),e.DNE(10,re,4,0,"div",37),e.DNE(11,oe,6,1,"div",38),e.DNE(12,ye,3,2,"div",67),e.k0s()()),2&n){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",t.currentPath.length>0),e.R7$(2),e.Y8G("ngForOf",t.currentPath),e.R7$(2),e.Y8G("ngIf",!t.currentCategory&&!t.currentFolder),e.R7$(1),e.Y8G("ngIf",t.currentCategory),e.R7$(2),e.Y8G("ngIf",t.isLoading),e.R7$(1),e.Y8G("ngIf",t.error),e.R7$(1),e.Y8G("ngIf",!t.isLoading&&!t.error)}}function Fe(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",108)(1,"h1"),e.EFF(2,"Settings"),e.k0s(),e.j41(3,"div",109)(4,"div",110)(5,"h2"),e.EFF(6,"Display Preferences"),e.k0s(),e.j41(7,"div",111)(8,"label")(9,"input",112),e.bIt("ngModelChange",function(r){e.eBV(t);const s=e.XpG();return e.Njj(s.isSidebarCollapsed=r)}),e.k0s(),e.EFF(10," Collapse Sidebar by Default "),e.k0s()()()()()}if(2&n){const t=e.XpG();e.R7$(9),e.Y8G("ngModel",t.isSidebarCollapsed)}}let Ie=(()=>{class n{constructor(t,i,r,s){this.catalogService=t,this.snackBar=i,this.dialog=r,this.router=s,this.currentView="dashboard",this.isSidebarCollapsed=!1,this.isLoading=!1,this.error=null,this.currentPath=[],this.selectedItem=null,this.isRenaming=!1,this.newItemName="",this.categories=[],this.currentFolders=[],this.currentFiles=[],this.selectedCategory=null,this.dashboardStats={totalProducts:0,totalCategories:0,recentUploads:0},this.userId=1,this.customerId=1,this.destroy$=new I.B}ngOnInit(){this.loadInitialData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadInitialData(){this.isLoading=!0,this.error=null,this.catalogService.getCategories(this.customerId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe({next:t=>{this.categories=t,this.updateDashboardStats(),this.isLoading=!1},error:t=>{this.error=t.message,this.isLoading=!1,this.showError("Error loading categories")}})}openCategoryInNewTab(t){const i=`/product/customerview/${t.categoryId}?categoryName=${encodeURIComponent(t.name)}`,r=window.open(i,"_blank");r&&(r.document.title=`Repainters - ${t.name}`)}getTotalFiles(){let t=0;return this.categories.forEach(i=>{this.catalogService.getFolders(i.categoryId,this.customerId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe(r=>{r.forEach(s=>{this.catalogService.getFiles(s.folderId,this.customerId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe(a=>{t+=a.length})})})}),t}getRecentUploads(){const t=new Date;t.setDate(t.getDate()-7);let i=0;return this.categories.forEach(r=>{this.catalogService.getFolders(r.categoryId,this.customerId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe(s=>{s.forEach(a=>{this.catalogService.getFiles(a.folderId,this.customerId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe(_=>{i+=_.filter(v=>new Date(v.createdOn)>t).length})})})}),i}getCategoryFolderCount(t){let i=0;return this.catalogService.getFolders(t.categoryId,this.customerId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe(r=>{i=r.length}),i}getCategoryFileCount(t){let i=0;return this.catalogService.getFolders(t.categoryId,this.customerId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe(r=>{r.forEach(s=>{this.catalogService.getFiles(s.folderId,this.customerId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe(a=>{i+=a.length})})}),i}viewCategoryContents(t){this.selectedCategory=t,this.loadCategoryContents(t.categoryId)}loadCategoryContents(t){this.isLoading=!0,this.error=null,this.catalogService.getFolders(t,this.customerId,this.userId).pipe((0,c.Q)(this.destroy$),(0,C.j)(()=>this.isLoading=!1)).subscribe({next:i=>{this.currentFolders=i,i.forEach(r=>{this.catalogService.getFiles(r.folderId,this.customerId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe({next:s=>{this.currentFiles=[...this.currentFiles,...s]},error:s=>{this.error="Error loading files",console.error("Error loading files:",s)}})})},error:i=>{this.error="Error loading folders",console.error("Error loading folders:",i)}})}closeModal(){this.selectedCategory=null,this.currentFolders=[],this.currentFiles=[]}updateDashboardStats(){this.isLoading=!0;let t=0,i=0;const r=new Date;r.setDate(r.getDate()-7);const s=this.categories.map(a=>this.catalogService.getFolders(a.categoryId,this.customerId,this.userId).pipe((0,O.Z)(_=>{const v=_.map(h=>this.catalogService.getFiles(h.folderId,this.customerId,this.userId));return(0,P.p)(v).pipe((0,j.T)(h=>{const p=h.flat();return t+=p.length,i+=p.filter(x=>new Date(x.createdOn)>r).length,p}))})));(0,P.p)(s).pipe((0,c.Q)(this.destroy$),(0,C.j)(()=>this.isLoading=!1)).subscribe({next:()=>{this.dashboardStats={totalProducts:t,totalCategories:this.categories.length,recentUploads:i}},error:a=>{console.error("Error updating dashboard stats:",a),this.isLoading=!1}})}getFileTypeIcon(t){if(!t||!t.fileType)return"fa-file";const i=t.fileType.toLowerCase();return i.includes("image")?"fa-file-image":i.includes("pdf")?"fa-file-pdf":i.includes("word")||i.includes("document")?"fa-file-word":i.includes("excel")||i.includes("spreadsheet")?"fa-file-excel":i.includes("zip")||i.includes("archive")?"fa-file-archive":i.includes("text")?"fa-file-alt":"fa-file"}onItemDoubleClick(t){this.isFolder(t)?this.navigateToFolder(t):this.isCategory(t)&&this.navigateToCategory(t)}toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed}navigateToCategory(t){this.currentView="files",this.currentCategory=t,this.currentFolder=void 0,this.currentPath=[t.name],this.loadFolders(t.categoryId)}navigateToFolder(t){this.currentFolder=t,this.currentPath.push(t.name),this.loadFiles(t.folderId)}navigateUp(){0!==this.currentPath.length&&(this.currentPath.pop(),this.isLoading=!0,0===this.currentPath.length?(this.currentCategory=void 0,this.currentFolder=void 0,this.currentFiles=[],this.currentFolders=[],this.loadInitialData()):this.currentCategory&&!this.currentFolder?(this.currentFolder=void 0,this.loadFolders(this.currentCategory.categoryId)):this.currentFolder?.parentFolderId&&this.loadParentFolder(this.currentFolder.parentFolderId))}previewFile(t){this.dialog.open(M,{data:{file:t},width:"80vw",maxWidth:"1200px",maxHeight:"90vh"})}createCategory(){var t=this;return(0,$.A)(function*(){const i={categoryId:0,name:"New Category",customerId:t.customerId,userId:t.userId,createdBy:t.userId,createdOn:new Date,isDeleted:!1};t.isLoading=!0,t.catalogService.createCategory(i).pipe((0,c.Q)(t.destroy$)).subscribe({next:r=>{t.categories.push(r),t.selectedItem=r,t.isRenaming=!0,t.newItemName=r.name,t.isLoading=!1,t.showSuccess("Category created")},error:r=>{t.isLoading=!1,t.showError("Error creating category")}})})()}createNewFolder(){if(!this.currentCategory)return void this.showError("Please select a category first");const t={folderId:0,name:"New Folder",categoryId:this.currentCategory.categoryId,parentFolderId:this.currentFolder?.folderId,customerId:this.customerId,userId:this.userId,createdBy:this.userId,createdOn:new Date,isDeleted:!1};this.isLoading=!0,this.catalogService.createFolder(t).pipe((0,c.Q)(this.destroy$)).subscribe({next:i=>{this.currentFolder?this.loadFiles(this.currentFolder.folderId):this.loadFolders(this.currentCategory.categoryId),this.selectedItem=i,this.isRenaming=!0,this.newItemName=i.name,this.isLoading=!1,this.showSuccess("Folder created")},error:i=>{this.isLoading=!1,this.showError("Error creating folder")}})}uploadFile(t){const i=t.target.files[0];i?this.currentFolder?.folderId&&this.currentCategory?.categoryId?(this.isLoading=!0,this.catalogService.uploadFile(i,this.currentFolder.folderId,this.currentCategory.categoryId).pipe((0,c.Q)(this.destroy$),(0,C.j)(()=>{this.isLoading=!1,t.target&&(t.target.value="")})).subscribe({next:r=>{this.loadFiles(this.currentFolder.folderId),this.showSuccess("File uploaded successfully")},error:r=>{console.error("Upload error:",r),this.showError(r.message||"Error uploading file: Unknown error")}})):this.showError("Please select a folder first"):this.showError("Please select a file")}deleteItem(t){const i=this.getItemType(t);confirm(`Are you sure you want to delete this ${i}?`)&&(this.isLoading=!0,"fileId"in t?this.deleteFile(t):"folderId"in t?this.deleteFolder(t):"categoryId"in t&&this.deleteCategory(t))}startRename(t){this.selectedItem=t,this.isRenaming=!0,this.newItemName=t.name}finishRename(){if(!this.selectedItem||!this.newItemName.trim())return;const t={...this.selectedItem,name:this.newItemName.trim()};this.isLoading=!0,"fileId"in t?this.isLoading=!1:"folderId"in t?this.updateFolder(t):"categoryId"in t&&this.updateCategory(t)}loadFolders(t){this.isLoading=!0,this.error=null,this.catalogService.getFolders(t,this.customerId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe({next:i=>{this.currentFolders=i,this.currentFiles=[],this.isLoading=!1},error:i=>{this.error=i.message,this.isLoading=!1,this.showError("Error loading folders")}})}loadFiles(t){this.isLoading=!0,this.catalogService.getFiles(t,this.customerId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe({next:i=>{this.currentFiles=i,this.isLoading=!1},error:i=>{this.isLoading=!1,this.showError("Error loading files")}})}loadParentFolder(t){this.isLoading=!0,this.catalogService.getFolders(this.currentCategory.categoryId,this.customerId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe({next:i=>{const r=i.find(s=>s.folderId===t);r?(this.currentFolder=r,this.loadFiles(r.folderId)):(this.showError("Parent folder not found"),this.isLoading=!1)},error:i=>{this.isLoading=!1,this.showError("Error loading parent folder")}})}deleteFile(t){this.catalogService.deleteFile(t.fileId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe({next:()=>{this.loadFiles(this.currentFolder.folderId),this.showSuccess("File deleted")},error:i=>{this.isLoading=!1,this.showError("Error deleting file")}})}deleteFolder(t){this.catalogService.deleteFolder(t.folderId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe({next:()=>{this.currentFolder?this.loadFiles(this.currentFolder.folderId):this.loadFolders(this.currentCategory.categoryId),this.showSuccess("Folder deleted")},error:i=>{this.isLoading=!1,this.showError("Error deleting folder")}})}deleteCategory(t){this.catalogService.deleteCategory(t.categoryId,this.userId).pipe((0,c.Q)(this.destroy$)).subscribe({next:()=>{this.loadInitialData(),this.showSuccess("Category deleted")},error:i=>{this.isLoading=!1,this.showError("Error deleting category")}})}updateFolder(t){this.catalogService.updateFolder(t).pipe((0,c.Q)(this.destroy$)).subscribe({next:()=>{this.currentFolder?this.loadFiles(this.currentFolder.folderId):this.loadFolders(this.currentCategory.categoryId),this.isRenaming=!1,this.showSuccess("Folder updated")},error:i=>{this.isLoading=!1,this.showError("Error updating folder")}})}updateCategory(t){this.catalogService.updateCategory(t).pipe((0,c.Q)(this.destroy$)).subscribe({next:()=>{this.loadInitialData(),this.isRenaming=!1,this.showSuccess("Category updated")},error:i=>{this.isLoading=!1,this.showError("Error updating category")}})}calculateTotalFiles(){let t=0;return this.categories.forEach(i=>{i.folders?.forEach(r=>{t+=r.files?.length||0})}),t}getItemType(t){return"fileId"in t?"file":"folderId"in t?"folder":"categoryId"in t?"category":"item"}getCurrentItems(){return this.currentFolder?this.currentFiles:this.currentCategory?this.currentFolders:this.categories}showSuccess(t){this.snackBar.open(t,"Close",{duration:3e3,panelClass:["success-snackbar"]})}showError(t){this.snackBar.open(t,"Close",{duration:5e3,panelClass:["error-snackbar"]})}isCategory(t){return"categoryId"in t}isFolder(t){return"folderId"in t}isFile(t){return"fileId"in t}openCreateCategoryDialog(){this.dialog.open(G,{width:"400px",data:{customerId:this.customerId,userId:this.userId}}).afterClosed().subscribe(i=>{i&&(this.categories.push(i),this.updateDashboardStats(),this.showSuccess("Category created successfully"))})}getFileIcon(t){const i=t.fileType.toLowerCase();return i.includes("image")?"image":i.includes("pdf")?"picture_as_pdf":i.includes("word")?"description":i.includes("excel")?"table_chart":"insert_drive_file"}formatFileSize(t){return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:t<1073741824?`${(t/1048576).toFixed(1)} MB`:`${(t/1073741824).toFixed(1)} GB`}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(b),e.rXU(m.UG),e.rXU(g.bZ),e.rXU(u.iI))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-product"]],decls:29,vars:12,consts:[[1,"dashboard-container"],[1,"sidebar"],[1,"sidebar-header"],[1,"collapse-btn",3,"click"],[1,"fas","fa-bars"],[1,"sidebar-nav"],[3,"click"],[1,"fas","fa-tachometer-alt"],[1,"fas","fa-folder"],[1,"fas","fa-cog"],[1,"main-content"],[1,"back"],["mat-raised-button","","routerLink","/dashboard/dashboard"],["class","dashboard-view",4,"ngIf"],["class","modal",3,"show",4,"ngIf"],["class","files-view",4,"ngIf"],["class","settings-view",4,"ngIf"],[1,"dashboard-view"],[1,"stats-grid"],[1,"stat-card"],[1,"fas","fa-box"],[1,"stat-info"],[1,"fas","fa-tags"],[1,"fas","fa-upload"],[1,"category-section"],[1,"category-grid"],["class","category-card",3,"click",4,"ngFor","ngForOf"],[1,"category-card",3,"click"],[1,"category-thumbnail"],[1,"fas","fa-folder-open"],[1,"category-info"],[1,"modal"],[1,"modal-content"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","category-contents",4,"ngIf"],[1,"loading-state"],[1,"fas","fa-spinner","fa-spin"],[1,"error-state"],[1,"fas","fa-exclamation-circle"],[1,"btn-secondary",3,"click"],[1,"category-contents"],["class","folders-section",4,"ngIf"],["class","files-section",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"folders-section"],[1,"folder-grid"],["class","folder-item",4,"ngFor","ngForOf"],[1,"folder-item"],[1,"files-section"],[1,"file-grid"],["class","file-item",4,"ngFor","ngForOf"],[1,"file-item"],[1,"empty-state"],[1,"files-view"],[1,"files-header"],[1,"path-navigation"],["class","btn-secondary",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"file-actions"],["class","btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"file-explorer"],["class","file-list",4,"ngIf"],[1,"fas","fa-arrow-left"],[1,"btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"fas","fa-folder-plus"],[1,"btn-primary"],[1,"fas",3,"ngClass"],["type","file",2,"display","none",3,"disabled","change"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"text-muted"],[1,"file-list"],["class","file-item",3,"selected","click","dblclick",4,"ngFor","ngForOf"],[1,"file-item",3,"click","dblclick"],[1,"file-item-content"],[3,"ngSwitch"],["class","fas fa-folder-open",4,"ngSwitchCase"],["class","fas fa-folder",4,"ngSwitchCase"],[3,"class",4,"ngSwitchCase"],["class","file-name",4,"ngIf"],["class","action-btn","title","Preview",3,"click",4,"ngIf"],["title","Rename",1,"action-btn",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"action-btn",3,"click"],[1,"fas","fa-trash"],["class","action-btn","title","Open",3,"click",4,"ngIf"],["class","item-details",4,"ngIf"],["autoFocus","",1,"rename-input",3,"ngModel","ngModelChange","blur","keyup.enter"],[1,"file-name"],["title","Preview",1,"action-btn",3,"click"],[1,"fas","fa-eye"],["title","Open",1,"action-btn",3,"click"],[1,"fas","fa-arrow-right"],[1,"item-details"],["class","file-details",4,"ngIf"],["class","folder-details",4,"ngIf"],[1,"file-details"],[1,"detail-item"],[1,"fas","fa-clock"],["class","detail-item",4,"ngIf"],[1,"folder-details"],[1,"settings-view"],[1,"settings-content"],[1,"settings-section"],[1,"setting-item"],["type","checkbox",3,"ngModel","ngModelChange"]],template:function(i,r){1&i&&(e.j41(0,"div",0)(1,"aside",1)(2,"div",2)(3,"h2"),e.EFF(4,"Product Manager"),e.k0s(),e.j41(5,"button",3),e.bIt("click",function(){return r.toggleSidebar()}),e.nrm(6,"i",4),e.k0s()(),e.j41(7,"nav",5)(8,"ul")(9,"li",6),e.bIt("click",function(){return r.currentView="dashboard"}),e.nrm(10,"i",7),e.j41(11,"span"),e.EFF(12,"Dashboard"),e.k0s()(),e.j41(13,"li",6),e.bIt("click",function(){return r.currentView="files"}),e.nrm(14,"i",8),e.j41(15,"span"),e.EFF(16,"Upload"),e.k0s()(),e.j41(17,"li",6),e.bIt("click",function(){return r.currentView="settings"}),e.nrm(18,"i",9),e.j41(19,"span"),e.EFF(20,"Settings"),e.k0s()()()()(),e.j41(21,"main",10)(22,"div",11)(23,"button",12),e.EFF(24,"Back to Dashboard"),e.k0s()(),e.DNE(25,L,30,4,"div",13),e.DNE(26,Z,11,6,"div",14),e.DNE(27,xe,13,7,"div",15),e.DNE(28,Fe,11,1,"div",16),e.k0s()()),2&i&&(e.R7$(1),e.AVh("collapsed",r.isSidebarCollapsed),e.R7$(8),e.AVh("active","dashboard"===r.currentView),e.R7$(4),e.AVh("active","files"===r.currentView),e.R7$(4),e.AVh("active","settings"===r.currentView),e.R7$(8),e.Y8G("ngIf","dashboard"===r.currentView),e.R7$(1),e.Y8G("ngIf",r.selectedCategory),e.R7$(1),e.Y8G("ngIf","files"===r.currentView),e.R7$(1),e.Y8G("ngIf","settings"===r.currentView))},dependencies:[f.YU,f.Sq,f.bT,f.ux,f.e1,u.Wk,l.me,l.Zm,l.BC,l.vS,y.$z],styles:[".dashboard-container[_ngcontent-%COMP%]{display:flex;height:100vh;background-color:#f8f9fa}.sidebar[_ngcontent-%COMP%]{width:250px;background-color:#2c3e50;color:#fff;transition:all .3s ease;box-shadow:2px 0 5px #0000001a}.sidebar.collapsed[_ngcontent-%COMP%]{width:60px}.sidebar-header[_ngcontent-%COMP%]{padding:1rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,.1)}.sidebar-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:1rem 0}.sidebar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.8rem 1rem;display:flex;align-items:center;cursor:pointer;transition:background-color .3s ease}.sidebar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.sidebar-nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#34495e}.sidebar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:1rem;width:20px;text-align:center}.main-content[_ngcontent-%COMP%]{flex:1;padding:2rem;overflow-y:auto}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.5rem;margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{background-color:#fff;padding:1.5rem;border-radius:10px;box-shadow:0 2px 4px #0000001a;display:flex;align-items:center}.stat-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:#3498db;margin-right:1rem}.stat-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:#666}.stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:1.5rem;font-weight:700;color:#2c3e50}.files-view[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 2px 4px #0000001a;padding:1.5rem}.files-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.path-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.path-navigation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.file-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.file-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.8rem;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.file-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.file-item.selected[_ngcontent-%COMP%]{background-color:#e3f2fd}.file-item-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1}.file-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3498db}.file-name[_ngcontent-%COMP%]{flex:1}.rename-input[_ngcontent-%COMP%]{padding:.5rem;border:2px solid #3498db;border-radius:4px;font-size:1rem;width:200px}.rename-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3}.file-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.action-btn[_ngcontent-%COMP%]{background:none;border:none;padding:.5rem;cursor:pointer;border-radius:4px;color:#666;transition:all .2s ease}.action-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.action-btn.edit[_ngcontent-%COMP%]:hover{color:#2196f3}.action-btn.delete[_ngcontent-%COMP%]:hover{color:#f44336}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border:none;border-radius:5px;cursor:pointer;display:flex;align-items:center;gap:.5rem;font-weight:500;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.category-list[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;gap:.5rem}.category-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.8rem 1rem;background:white;border-radius:6px;border:1px solid #e0e0e0;transition:all .2s ease}.category-item[_ngcontent-%COMP%]:hover{background:#f8f9fa;border-color:#d0d0d0}.category-name[_ngcontent-%COMP%]{font-weight:500;color:#2c3e50;display:flex;align-items:center;gap:.5rem}.category-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3498db}.category-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.file-explorer[_ngcontent-%COMP%]{padding:16px}.file-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.file-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px;border:1px solid #e0e0e0;border-radius:4px;cursor:pointer}.file-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.file-item.selected[_ngcontent-%COMP%]{background-color:#e0f7fa}.file-name[_ngcontent-%COMP%]{font-weight:500}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:16px;color:#666}.new-folder-container[_ngcontent-%COMP%]{margin:10px 0}.folder-name-input[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px;width:200px}.folder-name-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;box-shadow:0 0 0 2px #2196f333}.category-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px;padding:20px}.category-card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;padding:16px;cursor:pointer;transition:transform .2s}.category-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.category-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.category-content[_ngcontent-%COMP%]{padding:20px}.category-icon[_ngcontent-%COMP%]{font-size:40px;color:gold;margin-bottom:15px}.category-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#333}.category-stats[_ngcontent-%COMP%]{display:flex;gap:15px;color:#666;font-size:14px}.category-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.category-thumbnail[_ngcontent-%COMP%]{background-color:#3498db;padding:1.5rem;text-align:center}.category-thumbnail[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#fff}.category-info[_ngcontent-%COMP%]{padding:1rem;text-align:center}.category-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;color:#2c3e50}.view-btn[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;border:none;padding:.5rem 1rem;border-radius:5px;cursor:pointer;margin-top:1rem;transition:background-color .3s ease}.view-btn[_ngcontent-%COMP%]:hover{background-color:#2980b9}.back[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;float:inline-end;margin-top:-30px}"]})}}return n})();function we(n,o){1&n&&(e.j41(0,"div",5),e.nrm(1,"i",6),e.j41(2,"p"),e.EFF(3,"Loading..."),e.k0s()())}function ke(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",7),e.nrm(1,"i",8),e.j41(2,"p"),e.EFF(3),e.k0s(),e.j41(4,"button",9),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.loadCategoryDetails())}),e.EFF(5," Retry "),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(3),e.JRh(t.error)}}function Me(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",22)(1,"div",23),e.nrm(2,"i"),e.k0s(),e.j41(3,"div",24)(4,"span",25),e.EFF(5),e.k0s(),e.j41(6,"span",26),e.EFF(7),e.k0s()(),e.j41(8,"div",27)(9,"button",28),e.bIt("click",function(){const s=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.previewFile(s))}),e.nrm(10,"i",29),e.EFF(11," Preview "),e.k0s()()()}if(2&n){const t=o.$implicit,i=e.XpG(3);e.R7$(2),e.HbH("fas "+i.getFileTypeIcon(t)),e.R7$(3),e.JRh(t.name),e.R7$(2),e.JRh(t.fileType)}}function $e(n,o){if(1&n&&(e.j41(0,"div",17)(1,"div",18),e.nrm(2,"i",19),e.j41(3,"h2"),e.EFF(4),e.k0s()(),e.j41(5,"div",20),e.DNE(6,Me,12,4,"div",21),e.k0s()()),2&n){const t=o.$implicit,i=e.XpG(2);e.R7$(4),e.JRh(t.name),e.R7$(2),e.Y8G("ngForOf",i.getFilesForFolder(t.folderId))}}function Oe(n,o){1&n&&(e.j41(0,"div",30),e.nrm(1,"i",31),e.j41(2,"p"),e.EFF(3,"No content in this category"),e.k0s()())}function je(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",10)(1,"div",11),e.nrm(2,"i",12),e.j41(3,"input",13),e.bIt("ngModelChange",function(r){e.eBV(t);const s=e.XpG();return e.Njj(s.searchText=r)})("ngModelChange",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.filterItems())}),e.k0s()(),e.j41(4,"div",14)(5,"h1"),e.EFF(6),e.k0s()(),e.DNE(7,$e,7,2,"div",15),e.DNE(8,Oe,4,0,"div",16),e.k0s()}if(2&n){const t=e.XpG();e.R7$(3),e.Y8G("ngModel",t.searchText),e.R7$(3),e.JRh(t.category.name),e.R7$(1),e.Y8G("ngForOf",t.folders),e.R7$(1),e.Y8G("ngIf",0===t.folders.length&&0===t.files.length)}}function Ee(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",32)(1,"div",33)(2,"div",34)(3,"h2"),e.EFF(4),e.k0s(),e.j41(5,"button",35),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closePreview())}),e.nrm(6,"i",36),e.k0s()(),e.j41(7,"div",37),e.nrm(8,"div",38),e.k0s()()()}if(2&n){const t=e.XpG();e.AVh("show",t.selectedFile),e.R7$(4),e.JRh(t.selectedFile.name),e.R7$(4),e.Y8G("ngSwitch",t.getFileType(t.selectedFile))}}const Re=[{path:"",children:[{path:"",component:(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-view"]],decls:1,vars:0,template:function(i,r){1&i&&e.nrm(0,"router-outlet")},dependencies:[u.n3]})}}return n})()},{path:"product",component:Ie},{path:"customerview/:categoryId",component:(()=>{class n{constructor(t,i,r,s,a){this.route=t,this.catalogService=i,this.sanitizer=r,this.dialog=s,this.snackBar=a,this.categoryName="",this.folders=[],this.files=[],this.filteredFiles=[],this.selectedFile=null,this.isLoading=!1,this.error=null,this.searchText="",this.CUSTOMER_ID=1,this.USER_ID=1,this.destroy$=new I.B}ngOnInit(){const t=this.route.snapshot.paramMap.get("categoryId");this.route.queryParams.subscribe(i=>{this.categoryName=i.categoryName||"Category",document.title=`Repainters - ${this.categoryName}`}),t?(this.categoryId=+t,this.loadCategoryDetails()):this.error="Invalid category ID"}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getFilesForFolder(t){return this.files.filter(i=>i.folderId===t)}filterItems(){if(!this.searchText)return void(this.filteredFiles=this.files);const t=this.searchText.toLowerCase();this.filteredFiles=this.files.filter(i=>i.name.toLowerCase().includes(t)||i.fileType.toLowerCase().includes(t))}previewFile(t){this.dialog.open(M,{data:{file:t},width:"80vw",maxWidth:"1200px",maxHeight:"90vh"})}closePreview(){this.selectedFile=null}getFileType(t){if(!t.fileType)return"unknown";const i=t.fileType.toLowerCase();return i.includes("image")?"image":i.includes("pdf")?"pdf":i.includes("word")?"word":i.includes("excel")?"excel":"unknown"}getSafeUrl(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}loadCategoryDetails(){this.isLoading=!0,this.error=null,this.catalogService.getCategories(this.CUSTOMER_ID,this.USER_ID).pipe((0,c.Q)(this.destroy$)).subscribe({next:t=>{const i=t.find(r=>r.categoryId===this.categoryId);i?(this.category=i,this.loadFolders()):(this.error="Category not found",this.isLoading=!1)},error:t=>{console.error("Error loading category:",t),this.error="Failed to load category details",this.isLoading=!1}})}loadFolders(){if(!this.categoryId)return this.error="Invalid category ID",void(this.isLoading=!1);this.catalogService.getFolders(this.categoryId,this.CUSTOMER_ID,this.USER_ID).pipe((0,c.Q)(this.destroy$)).subscribe({next:t=>{this.folders=t,this.loadFiles()},error:t=>{console.error("Error loading folders:",t),this.error="Failed to load folders",this.isLoading=!1}})}loadFiles(){if(0===this.folders.length)return void(this.isLoading=!1);let t=0;this.files=[],this.folders.forEach(i=>{this.catalogService.getFiles(i.folderId,this.CUSTOMER_ID,this.USER_ID).pipe((0,c.Q)(this.destroy$)).subscribe({next:r=>{this.files=[...this.files,...r],t++,t===this.folders.length&&(this.isLoading=!1)},error:r=>{console.error(`Error loading files for folder ${i.folderId}:`,r),t++,t===this.folders.length&&(this.isLoading=!1)}})})}getFileTypeIcon(t){if(!t||!t.fileType)return"fa-file";const i=t.fileType.toLowerCase();return i.includes("image")?"fa-file-image":i.includes("pdf")?"fa-file-pdf":i.includes("word")||i.includes("document")?"fa-file-word":i.includes("excel")||i.includes("spreadsheet")?"fa-file-excel":i.includes("zip")||i.includes("archive")?"fa-file-archive":i.includes("text")?"fa-file-alt":"fa-file"}showSuccess(t){this.snackBar.open(t,"Close",{duration:3e3,panelClass:["success-snackbar"]})}showError(t){this.snackBar.open(t,"Close",{duration:5e3,panelClass:["error-snackbar"]})}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(u.nX),e.rXU(b),e.rXU(k.up),e.rXU(g.bZ),e.rXU(m.UG))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-categoryview"]],decls:5,vars:4,consts:[[1,"category-view-container"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","content-container",4,"ngIf"],["class","modal",3,"show",4,"ngIf"],[1,"loading-state"],[1,"fas","fa-spinner","fa-spin"],[1,"error-state"],[1,"fas","fa-exclamation-circle"],[1,"btn-retry",3,"click"],[1,"content-container"],[1,"search-container"],[1,"fas","fa-search","search-icon"],["type","text","placeholder","Search files...",1,"search-input",3,"ngModel","ngModelChange"],[1,"category-header"],["class","folder-section",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"folder-section"],[1,"folder-header"],[1,"fas","fa-folder"],[1,"files-grid"],["class","file-card",4,"ngFor","ngForOf"],[1,"file-card"],[1,"file-icon"],[1,"file-details"],[1,"file-name"],[1,"file-type"],[1,"file-actions"],[1,"btn-preview",3,"click"],[1,"fas","fa-eye"],[1,"empty-state"],[1,"fas","fa-folder-open"],[1,"modal"],[1,"modal-content"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[3,"ngSwitch"]],template:function(i,r){1&i&&(e.j41(0,"div",0),e.DNE(1,we,4,0,"div",1),e.DNE(2,ke,6,1,"div",2),e.DNE(3,je,9,4,"div",3),e.k0s(),e.DNE(4,Ee,9,4,"div",4)),2&i&&(e.R7$(1),e.Y8G("ngIf",r.isLoading),e.R7$(1),e.Y8G("ngIf",r.error),e.R7$(1),e.Y8G("ngIf",!r.isLoading&&!r.error&&r.category),e.R7$(1),e.Y8G("ngIf",r.selectedFile))},dependencies:[f.Sq,f.bT,f.ux,l.me,l.BC,l.vS],styles:[".category-view-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.search-container[_ngcontent-%COMP%]{position:relative;margin-bottom:24px}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 40px;border:1px solid #e2e8f0;border-radius:8px;font-size:16px;transition:all .3s ease}.search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#94a3b8}.category-header[_ngcontent-%COMP%]{margin-bottom:24px}.category-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1e293b}.folder-section[_ngcontent-%COMP%]{background:white;border-radius:12px;box-shadow:0 1px 3px #0000001a;margin-bottom:24px;overflow:hidden}.folder-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px 24px;background:#f8fafc;border-bottom:1px solid #e2e8f0}.folder-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;margin-right:12px;font-size:20px}.folder-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#1e293b}.files-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px;padding:24px}.file-card[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;border:1px solid #e2e8f0;border-radius:8px;transition:all .3s ease}.file-card[_ngcontent-%COMP%]:hover{border-color:#3b82f6;box-shadow:0 2px 4px #0000001a}.file-icon[_ngcontent-%COMP%]{font-size:24px;color:#64748b;margin-right:16px}.file-details[_ngcontent-%COMP%]{flex:1;overflow:hidden}.file-name[_ngcontent-%COMP%]{display:block;font-weight:500;color:#1e293b;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.file-type[_ngcontent-%COMP%]{font-size:12px;color:#64748b}.file-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-preview[_ngcontent-%COMP%], .btn-download[_ngcontent-%COMP%]{padding:8px;border:none;border-radius:6px;background:transparent;color:#64748b;cursor:pointer;transition:all .2s ease}.btn-preview[_ngcontent-%COMP%]:hover, .btn-download[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#3b82f6}.modal[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:1000}.modal.show[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.modal-content[_ngcontent-%COMP%]{background:white;border-radius:12px;width:90%;max-width:800px;max-height:90vh;overflow:hidden}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 24px;border-bottom:1px solid #e2e8f0}.modal-body[_ngcontent-%COMP%]{padding:24px;max-height:calc(90vh - 70px);overflow-y:auto}.preview-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.preview-pdf[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:70vh}.preview-default[_ngcontent-%COMP%]{text-align:center;padding:48px 24px}.preview-default[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;color:#64748b;margin-bottom:16px}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;color:#64748b}.btn-retry[_ngcontent-%COMP%]{margin-top:16px;padding:8px 16px;border:none;border-radius:6px;background:#3b82f6;color:#fff;cursor:pointer;transition:all .2s ease}.btn-retry[_ngcontent-%COMP%]:hover{background:#2563eb}"]})}}return n})()}]}];let Te=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[u.iI.forChild(Re),u.iI]})}}return n})();var Ge=d(9631),Se=d(882);let De=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[f.MD,Te,l.X1,l.YN,m._T,g.hM,g.hM,Ge.fS,y.Hl,Se.RG,l.YN]})}}return n})()}}]);