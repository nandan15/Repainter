"use strict";(self.webpackChunkRepainters=self.webpackChunkRepainters||[]).push([[931],{2931:(v,m,a)=>{a.r(m),a.d(m,{TexturePaintingModule:()=>b});var o=a(177),u=a(7062),c=a(7705);const f=[{path:"",component:(()=>{class s{static{this.\u0275fac=function(d){return new(d||s)}}static{this.\u0275cmp=c.VBU({type:s,selectors:[["app-view"]],decls:2,vars:0,template:function(d,C){1&d&&(c.nrm(0,"router-outlet"),c.EFF(1,">"))},dependencies:[u.n3]})}}return s})(),children:[{path:"texture-painting",component:a(891).f}]}];let x=(()=>{class s{static{this.\u0275fac=function(d){return new(d||s)}}static{this.\u0275mod=c.$C({type:s})}static{this.\u0275inj=c.G2t({imports:[u.iI.forChild(f),u.iI]})}}return s})();var P=a(9417);let b=(()=>{class s{static{this.\u0275fac=function(d){return new(d||s)}}static{this.\u0275mod=c.$C({type:s})}static{this.\u0275inj=c.G2t({imports:[o.MD,x,P.X1]})}}return s})()},891:(v,m,a)=>{a.d(m,{f:()=>O});var o=a(9417),u=a(9969);class c{}var t=a(7705),h=a(7062),f=a(4412),x=a(6813),P=a(1626);let b=(()=>{class i{constructor(e){this.httpClient=e,this.baseUrl=x.c.backend.baseURL,this.texturePaintingMethod=this.baseUrl+"v1/texturepainting"}addTexturePainting(e){return this.httpClient.post(this.texturePaintingMethod+"/create",e)}listTexturePainting(e=""){return this.httpClient.get(this.texturePaintingMethod+e)}updateTexturePainting(e){return this.httpClient.post(`${this.texturePaintingMethod}/update/${e.texturePaintingId}`,e)}deleteTexturePainting(e){return this.httpClient.delete(`${this.texturePaintingMethod}/delete/${e}`)}getTexturePaintingByCustomerId(e){return this.httpClient.get(`${this.texturePaintingMethod}/customer/${e}`)}static{this.\u0275fac=function(n){return new(n||i)(t.KVO(P.Qq))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var s=a(5794);let w=(()=>{class i{get texturePainting(){return this._texturePainting.asObservable()}get addtexturePaintings(){return this._texturePaintings.asObservable()}constructor(e,n){this.texturePaintingService=e,this.toaster=n,this._texturePainting=new f.t([]),this.texturePaintingList={texturePainting:[]},this._texturePaintings=new f.t(new c),this.currentTexturePainting={_texturePaintings:new c}}addTexturePainting(e){e.forEach(n=>{this.texturePaintingService.addTexturePainting(n).subscribe(r=>{n.texturePaintingId=r.created_id,n.createdOn=n.createdOn||new Date,n.lastModifiedDate=new Date,this._texturePainting.next([...this.texturePaintingList.texturePainting,n]),this.toaster.success("Texture Painting Confirmed Successfully","Confirmation")})})}listTexturePainting(){this.texturePaintingService.listTexturePainting().subscribe(e=>{this.texturePaintingList.texturePainting=e,this._texturePainting.next(Object.assign({},this.texturePaintingList).texturePainting)})}updateTexturePainting(e){this.texturePaintingService.updateTexturePainting(e).subscribe(n=>{e.lastModifiedDate=new Date;const r=this.texturePaintingList.texturePainting.findIndex(l=>l.texturePaintingId==e.texturePaintingId);-1!==r&&(this.texturePaintingList.texturePainting[r]=e),this._texturePainting.next([...this.texturePaintingList.texturePainting]),this.toaster.success("Internal Painting Updated Successfully","Confirmation")})}getTexturePaintingByCustomerId(e,n){return this.texturePaintingService.getTexturePaintingByCustomerId(e)}static{this.\u0275fac=function(n){return new(n||i)(t.KVO(b),t.KVO(s.tw))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var p=a(177);function d(i,g){1&i&&(t.j41(0,"div",35),t.EFF(1," Area must be at least 100 sq ft "),t.k0s())}function C(i,g){if(1&i&&(t.j41(0,"option",36),t.EFF(1),t.k0s()),2&i){const e=g.$implicit;t.Y8G("value",e),t.R7$(1),t.SpI(" ",e," ")}}function M(i,g){if(1&i){const e=t.RV6();t.j41(0,"div",17)(1,"div",5)(2,"div",18)(3,"span",19),t.EFF(4),t.k0s(),t.j41(5,"button",20),t.bIt("click",function(){const l=t.eBV(e).index,y=t.XpG();return t.Njj(y.removeWall(l))}),t.EFF(6,"Remove"),t.k0s()(),t.j41(7,"div",21)(8,"div",22)(9,"label",23),t.EFF(10,"Area Sft"),t.k0s(),t.j41(11,"div",24),t.nrm(12,"input",25),t.j41(13,"span",26),t.EFF(14,"sq ft"),t.k0s()(),t.DNE(15,d,2,0,"div",27),t.k0s(),t.j41(16,"div",22)(17,"label",23),t.EFF(18,"Type"),t.k0s(),t.j41(19,"div",28)(20,"select",29)(21,"option",30),t.EFF(22,"Select paint type"),t.k0s(),t.DNE(23,C,2,2,"option",31),t.k0s()()(),t.j41(24,"div",22)(25,"label",23),t.EFF(26,"Product Code"),t.k0s(),t.j41(27,"div",24),t.nrm(28,"input",32),t.k0s()(),t.j41(29,"div",22)(30,"label",23),t.EFF(31,"Price"),t.k0s(),t.j41(32,"div",24)(33,"span",12),t.EFF(34,"\u20b9"),t.k0s(),t.nrm(35,"input",33),t.k0s()(),t.j41(36,"div",22)(37,"label",23),t.EFF(38,"Remarks"),t.k0s(),t.j41(39,"div",24),t.nrm(40,"input",34),t.k0s()()()()()}if(2&i){const e=g.$implicit,n=g.index,r=t.XpG();let l;t.Y8G("@fadeSlideInOut",void 0),t.R7$(1),t.Y8G("formGroup",r.getWallFormGroup(e)),t.R7$(3),t.SpI("Wall ",n+1,""),t.R7$(11),t.Y8G("ngIf",!r.isWallAreaValid(e)&&(null==(l=r.getWallFormGroup(e).get("area"))?null:l.touched)),t.R7$(8),t.Y8G("ngForOf",r.texturetype)}}let O=(()=>{class i{constructor(e,n,r,l){this.fb=e,this.cdRef=n,this.route=r,this.texturePaintingProvider=l,this.customerId=null,this.currenttexturepainting=new c,this.texturetype=["Budget","Premium","Luxury","Custom"],this.pricerates={Budget:250,Premium:500,Luxury:700,Custom:2500},this.textureForm=this.fb.group({texturePaintings:this.fb.array([]),sectionTotal:new o.MJ(0),totalRows:new o.MJ(0)})}ngOnInit(){this.addNewWall(),this.extractCustomerId(),this.customerId&&this.fetchTexturePaintingData()}fetchTexturePaintingData(){null!==this.customerId&&this.texturePaintingProvider.getTexturePaintingByCustomerId(this.customerId,{delete:0}).subscribe(e=>{e&&e.length>0&&(this.texturePaintings.clear(),e.forEach(n=>{const r=this.createWallFormGroup();r.patchValue({area:Number(n.area),type:n.type,productCode:n.productCode,price:n.price,remarks:n.remarks}),this.texturePaintings.push(r)}),this.updateSectionTotal())},e=>{console.error("Error fetching texturing painting data:",e)})}extractCustomerId(){this.route.parent?.paramMap.subscribe(e=>{const n=e.get("customerId");this.customerId=n?parseInt(n,10):null,console.log("Parent Route Customer ID:",this.customerId)}),this.route.paramMap.subscribe(e=>{const n=e.get("customerId");n&&(this.customerId=parseInt(n,10),console.log("Current Route Customer ID:",this.customerId))}),this.currenttexturepainting&&this.currenttexturepainting.customerId&&(this.customerId=this.currenttexturepainting.customerId,console.log("Current Texture Painting Customer ID:",this.customerId))}get texturePaintings(){return this.textureForm.get("texturePaintings")}getWallFormGroup(e){return e}getSectionTotalControl(){return this.textureForm.get("sectionTotal")}createWallFormGroup(){return this.fb.group({area:new o.MJ(100,[o.k0.required,o.k0.min(100)]),type:new o.MJ(null),productCode:new o.MJ(null),price:new o.MJ(0),remarks:new o.MJ("")})}updatePrice(e){const n=Number(e.get("area")?.value)||0,r=e.get("type")?.value;n>=100&&r&&this.pricerates[r]&&(e.patchValue({price:n*this.pricerates[r]},{emitEvent:!1}),this.updateSectionTotal())}updateSectionTotal(){const e=this.texturePaintings.controls.reduce((n,r)=>n+(Number(r.get("price")?.value)||0),0);this.textureForm.patchValue({sectionTotal:e},{emitEvent:!1}),this.cdRef.detectChanges()}onConfirmTexturePainting(){if(!this.customerId)return void console.error("Customer Id is required");const n=this.texturePaintings.controls.map(r=>({customerId:this.customerId,area:r.get("area")?.value.toString(),type:r.get("type")?.value,productCode:r.get("productCode")?.value,price:r.get("price")?.value,remarks:r.get("remarks")?.value,sectionTotal:this.textureForm.get("sectionTotal")?.value.toString()}));this.texturePaintingProvider.addTexturePainting(n)}addNewWall(){const e=this.createWallFormGroup();e.get("area")?.valueChanges.subscribe(()=>this.updatePrice(e)),e.get("type")?.valueChanges.subscribe(()=>this.updatePrice(e)),this.texturePaintings.push(e),this.updateTotalRows()}removeWall(e){this.texturePaintings.removeAt(e),this.updateSectionTotal(),this.updateTotalRows()}updateTotalRows(){this.textureForm.patchValue({totalRows:this.texturePaintings.length},{emitEvent:!1})}isWallAreaValid(e){const r=e.get("area");return!!r&&!r.errors}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(o.ok),t.rXU(t.gRc),t.rXU(h.nX),t.rXU(w))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-texture-painting"]],inputs:{currenttexturepainting:"currenttexturepainting"},decls:26,vars:4,consts:[[1,"main-container"],[1,"header"],[1,"title"],["type","button",1,"add-wall-btn",3,"click"],[1,"plus-icon"],[3,"formGroup"],[1,"walls-container"],["class","wall-card",4,"ngFor","ngForOf"],[1,"total-section"],[1,"total-content"],[1,"total-label"],[1,"total-input-wrapper"],[1,"input-prefix"],["type","number","formControlName","sectionTotal","readonly","",3,"formControl"],[1,"row-count"],[1,"confirm-section"],[1,"confirm-btn",3,"click"],[1,"wall-card"],[1,"wall-header"],[1,"wall-number"],["type","button",1,"remove-btn",3,"click"],[1,"form-grid"],[1,"form-group"],[1,"form-label"],[1,"input-wrapper"],["type","string","formControlName","area","placeholder","100"],[1,"input-suffix"],["class","error-message",4,"ngIf"],[1,"select-wrapper"],["formControlName","type"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","productCode","placeholder","Enter product code"],["type","number","formControlName","price","readonly",""],["type","text","formControlName","remarks","placeholder","Enter Remarks"],[1,"error-message"],[3,"value"]],template:function(n,r){if(1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h2",2),t.EFF(3,"E. Texture Painting"),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){return r.addNewWall()}),t.j41(5,"span",4),t.EFF(6,"+"),t.k0s(),t.j41(7,"span"),t.EFF(8,"Add New Wall"),t.k0s()()(),t.j41(9,"form",5)(10,"div",6),t.DNE(11,M,41,5,"div",7),t.k0s(),t.j41(12,"div",8)(13,"div",9)(14,"span",10),t.EFF(15,"Section Total Texture Painting"),t.k0s(),t.j41(16,"div",11)(17,"span",12),t.EFF(18,"\u20b9"),t.k0s(),t.nrm(19,"input",13),t.k0s(),t.j41(20,"div",14)(21,"span"),t.EFF(22),t.k0s()()()()()(),t.j41(23,"div",15)(24,"button",16),t.bIt("click",function(){return r.onConfirmTexturePainting()}),t.EFF(25," Confirm Texture Painting "),t.k0s()()),2&n){let l;t.R7$(9),t.Y8G("formGroup",r.textureForm),t.R7$(2),t.Y8G("ngForOf",r.texturePaintings.controls),t.R7$(8),t.Y8G("formControl",r.getSectionTotalControl()),t.R7$(3),t.SpI("Total Rows: ",null==(l=r.textureForm.get("totalRows"))?null:l.value,"")}},dependencies:[p.Sq,p.bT,o.qT,o.xH,o.y7,o.me,o.Q0,o.wz,o.BC,o.cb,o.l_,o.j4,o.JD],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap";*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}.main-container[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;box-shadow:0 10px 30px #0000000d;max-width:2000px;margin:0 auto;background:linear-gradient(135deg,#b5ac9c 0%,#75ba9d 100%)}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:2px solid #75ba9d}.title[_ngcontent-%COMP%]{font-size:1.8rem;color:#000;font-weight:600;position:relative;padding-left:1rem}.title[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:4px;height:70%;background:#75ba9d;border-radius:2px}.add-wall-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#75ba9d,#b5ac9c);border:none;padding:.8rem 1.5rem;border-radius:12px;color:#fff;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:transform .2s,box-shadow .2s}.add-wall-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #75ba9d4d}.plus-icon[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.remove-btn[_ngcontent-%COMP%]{background:#fff;color:#dc3545;border:2px solid #dc3545;padding:.5rem 1rem;border-radius:8px;display:flex;align-items:center;gap:.5rem;cursor:pointer;transition:all .3s ease;font-size:.9rem;font-weight:500}.remove-btn[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff;transform:translateY(-2px);box-shadow:0 4px 8px #dc354533}.walls-container[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.wall-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:16px;overflow:hidden;transition:transform .3s,box-shadow .3s;border:1px solid rgba(181,172,156,.2)}.wall-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 20px #0000000d}.wall-header[_ngcontent-%COMP%]{background:linear-gradient(to right,rgba(117,186,157,.1),rgba(181,172,156,.1));padding:1rem 1.5rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(0,0,0,.05)}.wall-number[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;font-size:1.1rem}.wall-drag-handle[_ngcontent-%COMP%]{color:#b5ac9c;cursor:move;font-size:1.2rem;-webkit-user-select:none;user-select:none}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;padding:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-label[_ngcontent-%COMP%]{font-size:.9rem;color:#555;font-weight:500}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .select-wrapper[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.8rem 1rem;border:2px solid rgba(181,172,156,.2);border-radius:10px;font-size:.95rem;transition:all .3s ease;background:white}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .select-wrapper[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#75ba9d;box-shadow:0 0 0 3px #75ba9d1a}.input-prefix[_ngcontent-%COMP%], .input-suffix[_ngcontent-%COMP%]{position:absolute;color:#666;font-size:.9rem}.input-prefix[_ngcontent-%COMP%]{left:1rem}.input-suffix[_ngcontent-%COMP%]{right:1rem}.input-wrapper[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .input-wrapper[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding-left:2rem}.select-wrapper[_ngcontent-%COMP%]{position:relative}.select-arrow[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);color:#75ba9d;pointer-events:none;font-size:.8rem}.total-section[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem;border-top:2px dashed rgba(181,172,156,.3)}.total-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:linear-gradient(to right,#75ba9d,#b5ac9c);padding:1.5rem;border-radius:12px;color:#fff}.total-label[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem}.total-input-wrapper[_ngcontent-%COMP%]{position:relative;width:200px}.total-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.8rem 1rem .8rem 2rem;border:2px solid rgba(255,255,255,.2);border-radius:8px;background:rgba(255,255,255,.1);color:#fff;font-size:1.1rem;font-weight:500}.total-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff9}.total-input-wrapper[_ngcontent-%COMP%]   .input-prefix[_ngcontent-%COMP%]{color:#fff}@keyframes _ngcontent-%COMP%_fadeSlideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.wall-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeSlideIn .3s ease-out forwards}@media (max-width: 768px){.main-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.total-content[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.total-input-wrapper[_ngcontent-%COMP%]{width:100%}}'],data:{animation:[(0,u.hZ)("fadeSlideInOut",[(0,u.kY)(":enter",[(0,u.iF)({opacity:0,transform:"translateY(20px)"}),(0,u.i0)("300ms ease-out",(0,u.iF)({opacity:1,transform:"translateY(0)"}))])])]}})}}return i})()}}]);